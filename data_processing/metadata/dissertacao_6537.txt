UNIVERSIDADE FEDERAL DE MATO GROSSO DO SUL

INSTITUTO DE MATEM ´ATICA

PROGRAMA DE P ´OS GRADUAC¸ ˜AO

MESTRADO PROFISSIONAL EM MATEM ´ATICA
EM REDE NACIONAL

FERNANDO RIBEIRO FREITAS

APLICAC¸ ˜OES DE MODELOS DE OTIMIZAC¸ ˜AO DE PORTF ´OLIOS

CAMPO GRANDE - MS

2021

UNIVERSIDADE FEDERAL DE MATO GROSSO DO SUL

INSTITUTO DE MATEM ´ATICA

PROGRAMA DE P ´OS GRADUAC¸ ˜AO

MESTRADO PROFISSIONAL EM MATEM ´ATICA
EM REDE NACIONAL

FERNANDO RIBEIRO FREITAS

APLICAC¸ ˜OES DE MODELOS DE OTIMIZAC¸ ˜AO DE PORTF ´OLIOS

Orientadora: Profª. Drª. Rubia Mara de Oliveira Santos

Disserta¸c˜ao apresentada ao Programa

de P´os-Gradua¸c˜ao Mestrado Proﬁssio-

nal em Matem´atica em Rede Nacional

do Instituto de Matem´atica da Univer-

sidade Federal de Mato Grosso do Sul-

INMA/UFMS como parte dos requisi-

tos para obten¸c˜ao do t´ıtulo de Mestre.

Campo Grande - MS

2021

APLICAC¸ ˜OES DE MODELOS DE OTIMIZAC¸ ˜AO DE PORTF ´OLIOS

FERNANDO RIBEIRO FREITAS

Disserta¸c˜ao apresentada ao Programa de P´os-Gradua¸c˜ao Mestrado Proﬁssional em Matem´a-

tica em Rede Nacional do Instituto de Matem´atica da Universidade Federal de Mato Grosso

do Sul - INMA/UFMS como parte dos requisitos para obten¸c˜ao do t´ıtulo de Mestre.

Banca Examinadora:

Rubia Mara de Oliveira Santos - UFMS

Alex Ferreira Rossini - UFMS

Jair da Silva - UFPR

Campo Grande - MS

2021

Agradecimentos

Agrade¸co `a Deus em primeiro lugar, pois ´e Deus que traz o sentido de minha existˆencia e

me d´a for¸cas para lidar com a vida cada vez mais sobrecarregada, com prazos para cumprir,

com momentos de tens˜ao e de estresse. Admitir que Deus ´e o senhor da minha vida e permitir

que ele trabalhe pela minha vida me motiva a chegar longe e alcan¸car objetivos. Eu te agrade¸co

por ter me fortalecido para chegar ao ﬁm deste objetivo. Obrigado, meu Pai.

Agrade¸co aos meus pais, Tˆania e Edmilson, por me incentivarem a estudar e proporcionar

meios para facilitar minha trajet´oria nos estudos. A minha irm˜a, Thayane, por me suportar e

me ouvir em momentos dif´ıceis. A minha fam´ılia, agrade¸co pelo amor e pelo carinho que vocˆes

tem comigo, pelo suporte e motiva¸c˜ao que vocˆes me proporcionam para eu lutar pelos meus

sonhos.

Aos meus amigos de mestrado, o apoio e a motiva¸c˜ao de vocˆes foram essenciais para o

cumprimento dessa trajet´oria. Agrade¸co aos meus amigos de proﬁss˜ao, Maiara e Anderson,

pelo suporte e pelo aux´ılio que tiveram comigo, a experiˆencia do mestrado de vocˆes ajudou no

meu processo de estudos.

Agrade¸co a todos os professores que compartilharam os seus conhecimentos durante o mes-

trado, em especial a professora Dra. Rubia Mara de Oliveira Santos, por acreditar em mim,

pelas palavras de apoio e de conforto, suas experiˆencias e orienta¸c˜oes foram fundamentais para

a realiza¸c˜ao deste trabalho e me ajudou a prosseguir da melhor forma poss´ıvel.

i

Resumo

Esta disserta¸c˜ao apresenta algumas aplica¸c˜oes de modelos de otimiza¸c˜ao de portf´olios. O

desenvolvimento do trabalho ´e feito inicialmente com os conceitos fundamentais sobre ﬁnan¸cas,

cujo objetivo ´e facilitar a compreens˜ao da teoria moderna de otimiza¸c˜ao de portf´olios. Em se-

guida, ser´a apresentado o modelo m´edia-variˆancia e o modelo de preciﬁca¸c˜ao de ativos. Com o

intuito de tomar decis˜oes seguras para investir e despertar o interesse em estudantes e professo-

res ser˜ao realizadas aplica¸c˜oes utilizando esses modelos em portf´olios. E por ﬁm uma aplica¸c˜ao

no Ensino.

Palavras-chave: Aplica¸c˜oes, Portf´olio, Investimentos.

ii

Abstract

This dissertation approaches some applications of portfolio optimization models. The de-

velopment of the work is done with the fundamental concepts of ﬁnance, whose objective is

to facilitate the understanding of the modern portfolio theory. Then, will be introduced the

mean-variance analysis and the capital asset pricing model. In order to make safe decisions to

invest and arouse interest in students and teachers to carry out using these models in portfolios.

And ﬁnally an application in Education.

Keywords: Applications, Portfolio, Investments.

iii

Sum´ario

Introdu¸c˜ao

Ensino de Educa¸c˜ao Financeira na Educa¸c˜ao B´asica . . . . . . . . . . . . . . . . . . .

Ensino de Probabilidade e Estat´ıstica na Educa¸c˜ao B´asica . . . . . . . . . . . . . . .

O Google Colaboratory . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

Objetivos

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

1 Fundamenta¸c˜ao Te´orica

1.1 Conceitos B´asicos em Finan¸cas

. . . . . . . . . . . . . . . . . . . . . . . . . . .

1

2

3

5

6

7

7

1.2 Teoria Moderna de Portf´olio . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12

1.2.1 Exemplo de Coeﬁciente de Correla¸c˜oes Diferentes . . . . . . . . . . . . .

1.2.2 Fronteira Eﬁciente

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

1.3 Modelo M´edia-Variˆancia . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

14

16

19

1.4 Modelo de Preciﬁca¸c˜ao de Ativos Financeiros . . . . . . . . . . . . . . . . . . . . 20

2 Aplica¸c˜oes aos Problemas de Otimiza¸c˜ao de Portf´olio

2.1 Aplica¸c˜ao da Fronteira de Markowitz - Cen´ario com 2 ativos . . . . . . . . . . .

2.2 Aplica¸c˜ao - Cen´ario com 6 ativos

. . . . . . . . . . . . . . . . . . . . . . . . . .

2.3 Aplica¸c˜ao - Preciﬁca¸c˜ao de 5 ativos com CAPM . . . . . . . . . . . . . . . . . .

24

24

27

34

2.4 Aplica¸c˜ao - Cen´ario com 20 ativos . . . . . . . . . . . . . . . . . . . . . . . . . . 35

2.5 Aplica¸c˜ao no Ensino - Matriz de Covariˆancia . . . . . . . . . . . . . . . . . . . .

39

Apˆendice A

Apˆendice B

48

61

iv

Lista de Figuras

1.1 Correla¸c˜ao positiva perfeita = 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . 15

1.2 Correla¸c˜ao negativa perfeita = -1 . . . . . . . . . . . . . . . . . . . . . . . . . . 15

1.3 Correla¸c˜ao nula = 0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

1.4 Rela¸c˜ao entre o risco e a quantidade de ativos na carteira . . . . . . . . . . . . .

1.5 Fronteira Eﬁcente de Markowitz . . . . . . . . . . . . . . . . . . . . . . . . . . .

15

16

17

1.6 Fronteira Eﬁcente sem ativo livre de risco . . . . . . . . . . . . . . . . . . . . . . 21

1.7 Fronteira Eﬁciente com ativo livre de risco . . . . . . . . . . . . . . . . . . . . .

1.8 Rela¸c˜ao Retorno-Beta

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

21

23

2.1 Fronteira Eﬁcente de Markowitz Para os 2 ativos . . . . . . . . . . . . . . . . . . 27

2.2 Histograma dos 6 ativos

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

2.3 Boxplot dos 6 ativos

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

2.4 Hist´orico do pre¸co das a¸c˜oes - normalizado . . . . . . . . . . . . . . . . . . . . .

2.5 Comparativo Carteira x BOVA11 . . . . . . . . . . . . . . . . . . . . . . . . . .

2.6 Volatilidade dos 6 ativos . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

2.7 Fronteira Eﬁciente de Markowitz para os 6 ativos

. . . . . . . . . . . . . . . . .

2.8 Comparativo: Carteira x Carteira Otimizada . . . . . . . . . . . . . . . . . . . .

2.9 Comparativo dos Retornos: BOVA x ITAU . . . . . . . . . . . . . . . . . . . . .

2.10 Hist´orico do Pre¸co de A¸c˜oes - normalizado . . . . . . . . . . . . . . . . . . . . .

30

30

31

31

32

33

33

34

38

v

Lista de Tabelas

2.1 Cota¸c˜ao e Retorno dos 2 ativos

. . . . . . . . . . . . . . . . . . . . . . . . . . .

2.2 Dados Estat´ısticos dos 2 ativos e do portf´olio . . . . . . . . . . . . . . . . . . . .

2.3 Retorno e Risco dos 2 ativos variando a taxa de participa¸c˜ao . . . . . . . . . . .

2.4 Dados Hist´oricos dos 6 ativos

. . . . . . . . . . . . . . . . . . . . . . . . . . . .

2.5 Dados Estat´ısticos dos 6 ativos

. . . . . . . . . . . . . . . . . . . . . . . . . . .

2.6 Retorno M´edio Anual dos 6 ativos . . . . . . . . . . . . . . . . . . . . . . . . . .

2.7 Retorno Esperado dos 5 ativos . . . . . . . . . . . . . . . . . . . . . . . . . . . .

2.8

20 ativos selecionados na B3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

25

25

26

29

29

32

35

36

2.9 Dados estat´ısticos dos 20 ativos . . . . . . . . . . . . . . . . . . . . . . . . . . . 37

2.10 Retorno M´edio anual dos 20 ativos

. . . . . . . . . . . . . . . . . . . . . . . . .

37

2.11 Taxa de Participa¸c˜ao dos 20 ativos

. . . . . . . . . . . . . . . . . . . . . . . . . 38

2.12 Cota¸c˜ao dos ativos da Drogasil e CVC . . . . . . . . . . . . . . . . . . . . . . .

41

vi

Lista de S´ımbolos

B3

Bolsa de Valores Oﬁcial do Brasil

BNCC

Base Nacional Comum Curricular

BNDS

Banco Nacional de Desenvolvimento Econˆomico e Social

CAPM

Capital Asset Pricing Model

CDI

Certiﬁcado de Dep´osito Interbanc´ario

EBIT

Earnings Before Interest and Taxes

ENEF

Estrat´egia Nacional de Educa¸c˜ao Financeira

FBEF

F´orum Brasileiro de Educa¸c˜ao Financeira

IPCA

´Indice Nacional de Pre¸cos ao Consumidor Amplo

LDB

PIB

ROI

TEV

Lei de Diretrizes e Bases da Edua¸c˜ao Nacional

Produto Interno Bruto

Return On Investment

Total Enterprise Value

vii

Introdu¸c˜ao

O trabalho pioneiro na ´area de otimiza¸c˜ao de portf´olio foi o modelo m´edia-variˆancia proposto

pelo economista Harry Max Markowitz em 1952. A teoria do portf´olio estabelece que decis˜oes

relacionadas `a sele¸c˜ao de investimentos devem ser tomadas com base na rela¸c˜ao risco-retorno.

O Modelo de Markowitz possibilita que se calcule o risco de uma carteira de investimentos,

sem importar se a carteira ´e composta por renda ﬁxa, a¸c˜oes ou qualquer outro ativo. Um fato

importante ´e que usando o Modelo de Markowitz ´e poss´ıvel construir carteiras de investimento

em que o risco ´e inferior ao ativo de menor risco da carteira [18].

No in´ıcio do s´eculo XXI, houve um aumento not´avel no uso de modelagem ﬁnanceira e

ferramentas de otimiza¸c˜ao na gest˜ao de portf´olio de a¸c˜oes. Al´em da press˜ao das empresas de

gest˜ao de ativos para reduzir custos e manter um desempenho mais est´avel e previs´ıvel, trˆes ou-

tras tendˆencias gerais contribu´ıram para esse aumento. Primeiramente, ressurgiu um interesse

em modelos preditivos para retornos de ativos. Os modelos preditivos assumem que ´e poss´ıvel

fazer previs˜oes condicionais de retornos futuros, um objetivo que antes era considerado n˜ao

alcan¸c´avel pela teoria ﬁnanceira cl´assica. Em segundo, a ampla disponibilidade de pacotes de

software soﬁsticados e especializados permitiu gerar e explorar essas previs˜oes no gerenciamento

de portf´olio, muitas vezes em combina¸c˜ao com t´ecnicas de otimiza¸c˜ao e simula¸c˜ao. Terceiro, o

aumento cont´ınuo na velocidade do computador e a redu¸c˜ao simultˆanea nos custos de hardware

tornou acess´ıvel at´e mesmo para pequenas empresas [12].

O uso de t´ecnicas de modelagem se popularizou no gerenciamento de portf´olio, aumentando

a importˆancia em rela¸c˜ao a conﬁan¸ca que os proﬁssionais podem ter em modelos te´oricos. Con-

sequentemente, h´a um n´ıvel maior de interesse no assunto de estimativa e otimiza¸c˜ao robustas

na gest˜ao moderna de portf´olio. Durante anos, a robustez foi um ingrediente crucial nos campos

de engenharia, estat´ıstica e pesquisa operacional e existe agora um reconhecimento generalizado

da necessidade de uma abordagem disciplinada para a an´alise e gest˜ao de investimentos [12].

1

Ensino de Educa¸c˜ao Financeira na Educa¸c˜ao B´asica

A mobiliza¸c˜ao da sociedade civil, o desenvolvimento da economia brasileira e com mais

pessoas acessando produtos e servi¸cos ﬁnanceiros levou ao surgimento de in´umeras iniciativas

voltadas a mudar a realidade ﬁnanceira do brasileiro. Dessas iniciativas surge a Estrat´egia

Nacional de Educa¸c˜ao Financeira (ENEF), uma mobiliza¸c˜ao em torno da promo¸c˜ao de a¸c˜oes

de educa¸c˜ao ﬁnanceira, securit´aria, previdenci´aria e ﬁscal no Brasil. O objetivo da ENEF,

criada atrav´es do Decreto Federal 7.397/2010, e renovada pelo Decreto Federal nº 10.393, de

9 de junho de 2020, ´e contribuir para o fortalecimento da cidadania ao fornecer e apoiar a¸c˜oes

que ajudem a popula¸c˜ao a tomar decis˜oes ﬁnanceiras mais autˆonomas e conscientes, disseminar

a educa¸c˜ao ﬁnanceira e previdenci´aria e aumentar a eﬁciˆencia e solidez do sistema ﬁnanceiro. A

nova ENEF re´une representantes de 8 ´org˜aos e entidades governamentais, que juntos integram

o F´orum Brasileiro de Educa¸c˜ao Financeira (FBEF) [25].

Os programas da nova ENEF s˜ao guiados pelo Plano Diretor, sua Delibera¸c˜ao e seus Ane-

xos, documentos que consolidam a atua¸c˜ao da Estrat´egia Nacional de Educa¸c˜ao Financeira. As

a¸c˜oes da nova ENEF s˜ao compostas pelos programas transversais e setoriais, coordenados de

forma centralizada, mas executados de modo descentralizado [25]. Dentre os programas trans-

versais da ENEF encontra-se o Programa Educa¸c˜ao Financeira nas Escolas que prop˜oe levar a

educa¸c˜ao ﬁnanceira para o ambiente escolar. As ´areas principais s˜ao, o Ensino Fundamental

e M´edio, e o seu objetivo ´e contribuir para o desenvolvimento da cultura de planejamento,

preven¸c˜ao, poupan¸ca, investimento e consumo consciente nas futuras gera¸c˜oes de brasileiros.

Ao se trabalhar a educa¸c˜ao ﬁnanceira, securit´aria, previdenci´aria e ﬁscal desde os anos iniciais

da vida escolar, contribui-se com a constru¸c˜ao das competˆencias necess´arias para que os estu-

dantes enfrentem os desaﬁos sociais e econˆomicos da sociedade, e tamb´em para o exerc´ıcio da

cidadania.

O documento que orienta o tratamento da educa¸c˜ao ﬁnanceira nas escolas foi elaborado a

partir de contribui¸c˜oes de especialistas de diversas ´areas, garantindo uma postura participativa

e cooperativa. Ele parte de uma problem´atica atual e apresenta um conjunto de princ´ıpios que

devem nortear as a¸c˜oes necess´arias para se atingir uma situa¸c˜ao futura desejada. Essa proposta

tem como caracter´ıstica a ﬂexibilidade, para permitir sua adapta¸c˜ao aos diferentes contextos

escolares.

2

Ensino de Probabilidade e Estat´ıstica na Educa¸c˜ao B´asica

Conforme a Lei de Diretrizes e Bases da Educa¸c˜ao Nacional (LDB, Lei nº 9.394/1996), a

Base deve nortear os curr´ıculos dos sistemas e redes de ensino das Unidades Federativas, como

tamb´em as propostas pedag´ogicas de todas as escolas p´ublicas e privadas de Educa¸c˜ao Infantil,

Ensino Fundamental e Ensino M´edio, em todo o Brasil [6].

A Base Nacional Comum Curricular (BNCC) ´e um documento de car´ater normativo que

deﬁne o conjunto orgˆanico e progressivo de aprendizagens essenciais que todos os alunos devem

desenvolver ao longo das etapas e modalidades da Educa¸c˜ao B´asica. Estabelece conhecimen-

tos, competˆencias e habilidades que se espera que todos os estudantes desenvolvam ao longo

da escolaridade b´asica. Orientada pelos princ´ıpios ´eticos, pol´ıticos e est´eticos tra¸cados pelas

Diretrizes Curriculares Nacionais da Educa¸c˜ao B´asica, a Base soma-se aos prop´ositos que di-

recionam a educa¸c˜ao brasileira para a forma¸c˜ao humana integral e para a constru¸c˜ao de uma

sociedade justa, democr´atica e inclusiva [6].

Al´em disso, a BNCC e curr´ıculos tˆem pap´eis complementares para assegurar as aprendiza-

gens essenciais deﬁnidas para cada etapa da Educa¸c˜ao B´asica, uma vez que tais aprendizagens

s´o se materializam mediante o conjunto de decis˜oes que caracterizam o curr´ıculo em a¸c˜ao.

S˜ao essas decis˜oes que se adequam as proposi¸c˜oes da BNCC `a realidade local, considerando a

autonomia dos sistemas ou das redes de ensino e das institui¸c˜oes escolares, como tamb´em o

contexto e as caracter´ısticas dos alunos. Essas decis˜oes precisam, igualmente, ser considera-

das na organiza¸c˜ao de curr´ıculos e propostas adequados `as diferentes modalidades de ensino

(Educa¸c˜ao Especial, Educa¸c˜ao de Jovens e Adultos, Educa¸c˜ao do Campo, Educa¸c˜ao Escolar

Ind´ıgena, Educa¸c˜ao Escolar Quilombola, Educa¸c˜ao a Distˆancia), atendendo-se `as orienta¸c˜oes

das Diretrizes Curriculares Nacionais.

Cabe aos sistemas e redes de ensino, assim como `as escolas, em suas respectivas esferas

de autonomia e competˆencia, incorporar aos curr´ıculos e `as propostas pedag´ogicas a aborda-

gem de temas contemporˆaneos que afetam a vida humana em escala local, regional e global,

preferencialmente de forma transversal e integradora. Dentre os temas est´a incluso a sa´ude,

vida familiar e social, educa¸c˜ao para o consumo, educa¸c˜ao ﬁnanceira e ﬁscal, trabalho, ciˆencia

e tecnologia e diversidade cultural (Parecer CNE/CEB nº 11/2010 e Resolu¸c˜ao CNE/CEB nº

7/2010). Na BNCC, essas tem´aticas s˜ao contempladas em habilidades dos componentes curri-

culares, cabendo aos sistemas de ensino e escolas, de acordo com suas especiﬁcidades, trat´a-las

de forma contextualizada.

3

A BNCC leva em conta que os diferentes campos que comp˜oem a Matem´atica re´unem um

conjunto de ideias fundamentais que produzem articula¸c˜oes entre eles: equivalˆencia, ordem,

proporcionalidade, interdependˆencia, representa¸c˜ao, varia¸c˜ao e aproxima¸c˜ao. Essas ideias fun-

damentais s˜ao importantes para o desenvolvimento do pensamento matem´atico dos alunos e

devem se converter, na escola, em objetos de conhecimento. Nessa dire¸c˜ao, a BNCC prop˜oe

cinco unidades tem´aticas, dentre elas est˜ao a unidade sobre N´umeros e a unidade sobre Pro-

babilidade e Estat´ıstica, que orientam a formula¸c˜ao de habilidades a ser desenvolvidas ao longo

do Ensino Fundamental. Cada uma delas pode receber ˆenfase diferente, a depender do ano de

escolariza¸c˜ao.

Conforme a BNCC (p.268) “A unidade tem´atica N´umeros tem como ﬁnalidade desenvol-

ver o pensamento num´erico, que implica o conhecimento de maneiras de quantiﬁcar atributos

de objetos e de julgar e interpretar argumentos baseados em quantidades.” Um aspecto con-

siderado nesta tem´atica ´e o estudo de conceitos b´asicos de economia e ﬁnan¸cas, visando `a

educa¸c˜ao ﬁnanceira dos alunos. Assim, podem ser discutidos assuntos como taxas de juros,

inﬂa¸c˜ao, aplica¸c˜oes ﬁnanceiras (rentabilidade e liquidez de um investimento) e impostos. Com

isso, favorece um estudo interdisciplinar envolvendo as dimens˜oes culturais, sociais, pol´ıticas e

psicol´ogicas, al´em da econˆomica, sobre as quest˜oes do consumo, trabalho e dinheiro.

A unidade tem´atica sobre Probabilidade e Estat´ıstica trata da incerteza e do tratamento de

dados s˜ao estudados. Conforme a BNCC (p.274) “Ela prop˜oe a abordagem de conceitos, fatos

e procedimentos presentes em muitas situa¸c˜oes problema da vida cotidiana, das ciˆencias e da

tecnologia.” Nesta unidade merece o destaque para o uso de tecnologias como calculadoras, para

avaliar e comparar resultados, e planilhas eletrˆonicas, que ajudam na constru¸c˜ao de gr´aﬁcos e

nos c´alculos das medidas de tendˆencia central.

4

O Google Colaboratory

O Google Colaboratory, ou Google Colab, ´e um ambiente de desenvolvimento Python exe-

cutado no navegador usando o Google Cloud que permite ler, desenvolver e rodar c´odigos que

agrupam c´elulas de c´odigos, chamados de notebooks, compartilh´a-los com outros programa-

dores, fazer modiﬁca¸c˜oes e manter salvos online [14]. A execu¸c˜ao do software para escrever ´e

fornecido pela nuvem de computadores do Google, o Google Cloud. Isso permite ao usu´ario a

possibilidade de processar dados gratuitamente.

O Google Colab ´e hospedado pelo Jupyter Notebook, um software de c´odigo aberto que

tamb´em disponibiliza um ambiente online para a utiliza¸c˜ao de notebooks e ´e quem possibilita o

modo de como os c´odigos, as anota¸c˜oes e as marca¸c˜oes s˜ao organizados e dispostos no Colab. A

diferen¸ca entre utilizar o Jupyter Notebook instalado no computador e utilizar o Google Colab

´e que com ele n˜ao ´e necess´ario realizar conﬁgura¸c˜oes no computador, basta acess´a-lo e come¸car

a programar.

O Google Colab foi constru´ıdo com o objetivo de incentivar a pesquisa e o estudo de tec-

nologias voltadas `a inteligˆencia artiﬁcial, Machine Learning e ciˆencia de dados. Estudantes,

cientistas de dados e pesquisadores em Inteligˆencia Artiﬁcial podem fazer o uso do Google

Colab pela simplicidade e para facilitar os seus trabalhos. Para acessar o Google Colab ´e ne-

cess´ario ter uma conta no Google e acesso `a internet. O acesso ao Colab est´a dispon´ıvel em

https://colab.research.google.com/, nesta p´agina encontra-se mais informa¸c˜oes sobre as funci-

onalidades do Google Colab e os primeiros passos para utilizar o ambiente interativo.

O uso deste ambiente tem diversos benef´ıcios para o aprendizado em programa¸c˜ao, pois tem

f´acil acessibilidade, n˜ao ´e necess´ario baixar nenhum arquivo, o que ´e necess´ario para o desen-

volvimento dos c´odigos est´a totalmente hospedado pelo Google Cloud e o ambiente de execu¸c˜ao

e a linguagem ´e acess´ıvel atrav´es de um navegador web. Um dos grandes atrativos do Python

´e a quantidade de bibliotecas e frameworks dispon´ıveis para se trabalhar com essa linguagem,

e no Google Colab n˜ao ´e diferente. No Colab ´e poss´ıvel acessar bibliotecas pr´e-instaladas, com

isso reduz o tempo de importa¸c˜ao e facilita o aproveitamento de recursos. Dentre as biblio-

tecas dispon´ıveis est˜ao a Numpy, Pandas, Matplotlib, Scikit-learn e a TensorFlow, voltada a

machine learning. Nesta disserta¸c˜ao foram utilizadas a Numpy, Pandas, Mathplotlib, Seaborn

e Plotly.express.

5

Objetivos

O conceito sobre investimentos abrange diferentes aspectos da vida, podendo ser trabalhado

com investimentos intelectuais, sociais e culturais. Investir ´e ent˜ao uma aplica¸c˜ao de tempo,

energia, aten¸c˜ao, dedica¸c˜ao e estudo, que se reverte em novos recursos no futuro. O investi-
mento ﬁnanceiro ´e todo gasto e aplica¸c˜ao de capital cuja inten¸c˜ao seja produzir uma renda. ´E

uma forma de fazer o dinheiro ter uma rentabilidade sem necessidade de esfor¸cos f´ısicos ou in-

telectuais constantes, como ´e comum no trabalho. Essa pr´atica em investir busca estabilidade,

liberdade e seguran¸ca ﬁnanceira. A vantagem ´e que para come¸car a investir n˜ao ´e necess´ario

de um grande montante de capital ainda que essa restri¸c˜ao possa limitar as suas possibilidades

quando se trata de aplica¸c˜oes.

A motiva¸c˜ao para o desenvolvimento deste trabalho surgiu com o desaﬁo e a divulga¸c˜ao

em investir. O investidor deve estar preparado para lidar com o rendimento esperado, que ´e a

expectativa sobre os futuros ganhos, e com os poss´ıveis riscos de perda que cada um dos ativos

apresenta em um horizonte temporal que representa o tempo que o investimento leva para gerar

uma rentabilidade. Assim, esta disserta¸c˜ao tem como objetivo apresentar conceitos b´asicos

de ﬁnan¸cas, introduzir a Teoria Moderna de Portf´olio, modelos de otimiza¸c˜ao de portf´olio e

mostrar que aplica¸c˜oes destes modelos contribuem ao investidor tomar decis˜oes para alcan¸car

uma melhor rentabilidade em seus investimentos. Sendo assim, a disserta¸c˜ao est´a organizada

como segue:

O Cap´ıtulo 2 aborda conceitos fundamentais sobre ﬁnan¸cas, a idealiza¸c˜ao e o desenvol-

vimento da Teoria Moderna de Portf´olios de Markowitz, os conceitos de retorno, variˆancia,

correla¸c˜ao, diversiﬁca¸c˜ao, fronteira eﬁciente para formular os modelos de M´edia-Variˆancia de

Markowitz e o Modelo de Preciﬁca¸c˜ao de Ativos Financeiros.

O Cap´ıtulo 3 ´e destinado `as aplica¸c˜oes do Modelo M´edia-Variˆancia, do Modelo de Preci-

ﬁca¸c˜ao de Ativos e da diversiﬁca¸c˜ao de ativos utilizando a estrat´egia de investimentos Deep

Value Investing. Por ﬁm, uma aplica¸c˜ao no Ensino com o prop´osito de compreender a cons-

tru¸c˜ao da matriz de covariˆancia.

No Cap´ıtulo 4 ser˜ao apresentados as conclus˜oes e os trabalhos futuros.

6

Cap´ıtulo 1

Fundamenta¸c˜ao Te´orica

Para o desenvolvimento do tema proposto para o trabalho faz-se necess´aria a constru¸c˜ao de

um embasamento te´orico a ﬁm de compreender a teoria moderna de portf´olio e as aplica¸c˜oes

destes modelos matem´aticos que ser˜ao discutidas no cap´ıtulo 3. Os conceitos e as deﬁni¸c˜oes

foram retirados de [2, 3, 5, 10, 11, 12, 13, 18, 19, 21, 22, 23].

1.1 Conceitos B´asicos em Finan¸cas

O termo Finan¸cas de uma forma geral, trata-se do processo, institui¸c˜oes, mercados e ins-

trumentos envolvidos na transferˆencia de fundos entre pessoas, empresas e governos. Todos os

indiv´ıduos e organiza¸c˜oes obtˆem receitas ou levantam fundos, gastam ou investem. Analisando

este conceito todas as pessoas tem envolvimento com as ﬁnan¸cas. Decis˜oes ﬁnanceiras s˜ao to-

madas a todo o momento. Assim, ´e preciso entender de assuntos ﬁnanceiros e tomar as decis˜oes

ﬁnanceiras corretas e a ´area de ﬁnan¸cas que permite entender como as pessoas utilizam o di-

nheiro e se organizam ´e a de Finan¸cas Pessoais. Normalmente, o estudo das ﬁnan¸cas pessoais ´e

dividido em duas categorias: as ﬁnan¸cas comportamentais e as ﬁnan¸cas t´ecnicas. As ﬁnan¸cas

comportamentais visam, sobretudo, entender como fatores mentais e emocionais interferem na

forma de lidar com o dinheiro. As ﬁnan¸cas t´ecnicas ´e dedicada a estudar sobre d´ıvidas, ﬁnan-

ciamentos e investimentos, aproximando mais aos n´umeros e conceitos do que `a psicologia por
tr´as das decis˜oes. ´E o que permite avaliar tipos de investimentos e criar estrat´egias de multi-

plica¸c˜ao de capital, como a cria¸c˜ao de um controle ﬁnanceiro pessoal detalhado e preciso e um

aprofundamento em conhecimentos sobre como investir de acordo com cada objetivo individual.

7

Investimento pode ser descrito como sendo a aplica¸c˜ao do dinheiro poupado em algo que

possa trazer um ganho ﬁnanceiro ou rendimento. Os ativos ﬁnanceiros s˜ao os produtos dis-

pon´ıveis no mercado ﬁnanceiro e de capitais para serem negociados, como a¸c˜oes, fundos imo-

bili´arios, dep´ositos banc´arios e t´ıtulos p´ublicos. O mercado ﬁnanceiro e de capitais ´e uma es-

trutura de transa¸c˜oes de compra e venda de valores mobili´arios, como a¸c˜oes, moedas nacionais,

mercadorias, a exemplo dos commodities, e outros bens e t´ıtulos. O objetivo deste ambiente

de neg´ocios, que pode tanto ser social como virtual, ´e conectar quem precisa de dinheiro com

quem quer investir, sejam pessoas f´ısicas ou jur´ıdicas. O lucro dos agentes envolvidos d´a-se por

taxas de juros, valores de corretagem, diferen¸cas vindas da ﬂutua¸c˜ao dos mercados, entre ou-

tros. As transa¸c˜oes entre os investidores do mercado ﬁnanceiro s˜ao promovidas por institui¸c˜oes

intermedi´arias. S˜ao elas: Banco Central, bancos estatais e privados, corretoras de valores,

distribuidoras de t´ıtulos, fundos de investimentos e bolsa de valores. O mercado ﬁnanceiro bra-

sileiro ´e controlado por autoridades monet´arias e de apoio como o Conselho Monet´ario Nacional

e o Banco Central, e entre suas fun¸c˜oes est˜ao garantir o cumprimento da pol´ıtica monet´aria

nacional. H´a tamb´em a atua¸c˜ao do Comiss˜ao de Valores Monet´arios, do Banco do Brasil, do

Banco Nacional de Desenvolvimento Econˆomico e Social (BNDES), da Caixa Econˆomica Fe-

deral e do Conselho de Recursos do Sistema Financeiro Nacional. Estes ´org˜aos constituem o

Sistema Financeiro Nacional, que regulamenta as trocas estabelecidas no mercado ﬁnanceiro,

de forma a organizar as transa¸c˜oes e garantir a viabiliza¸c˜ao e legalidade dessas opera¸c˜oes entre

os chamados poupadores e tomadores. O portf´olio ou a carteira de investimentos ´e a forma¸c˜ao

de um grupo de ativos ﬁnanceiros que pertencem a um investidor, pessoa f´ısica ou jur´ıdica.

A diversiﬁca¸c˜ao, ´e deﬁnida como o modo com que o investidor divide sua carteira de in-

vestimentos nos diversos ativos ﬁnanceiros, contribuindo assim para a redu¸c˜ao dos riscos de

perda. O risco ´e visto como uma possibilidade de que algum acontecimento desfavor´avel venha

a ocorrer. Em um investimento, ele est´a diretamente ligado `a probabilidade de se ganhar menos

que o esperado e pode ser classiﬁcado de duas formas: diversiﬁc´avel e n˜ao diversiﬁc´avel. O

risco diversiﬁc´avel refere-se aos riscos que afetam um n´umero pequeno de empresas. Problemas

no processo de produ¸c˜ao e perda de gestores importantes s˜ao alguns exemplos de riscos que

podem afetar o desempenho de uma empresa e, consequentemente, o valor de seus pap´eis. O

risco n˜ao diversiﬁc´avel, ou o risco de mercado, como ´e conhecido, refere-se a fatores externos

que tˆem impacto sobre o mercado de a¸c˜oes em geral, o segmento no qual a empresa atua ou

sobre as pr´oprias companhias. Varia¸c˜oes nos pre¸cos das mat´erias-primas, oscila¸c˜oes nas taxas

8

cambiais, desastres naturais, crises econˆomicas globais e mudan¸cas em regimes de governo s˜ao

alguns exemplos desses riscos. Este ´e o mais preocupante, pois refere-se a acontecimentos que

afetam o mercado como um todo. Na forma¸c˜ao de uma carteira de investimentos, a diversi-

ﬁca¸c˜ao tem um papel importante, pois atrav´es dela pode-se incluir ativos com maior e menor

n´ıvel de risco de rentabilidade, de v´arios tipos de mercados, reduzindo assim o risco geral da

carteira de perdas provocadas por uma rentabilidade baixa ou negativa de um ´unico ativo.
´E essencial destacar que a diversiﬁca¸c˜ao reduz apenas o risco diversiﬁc´avel. Isso se deve ao

fato de que, quando se diversiﬁca um investimento, o capital total pode sofrer baixa relativa a

acontecimentos que afetam apenas um dos ativos que comp˜oem a carteira, podendo os outros

ativos reduzir as perdas totais.

Os indicadores s˜ao elementos que possuem como objetivo apontar ou mostrar algo a algu´em,

expressando o desempenho de processos durante um per´ıodo ou impondo atitudes, e podem

ser considerados guias eﬁcientes e seguros para an´alises profundas de diferentes cen´arios, per-

mitindo um olhar abrangente, t´ecnico e comparativo da realidade. Os indicadores ﬁnanceiros

s˜ao ferramentas que funcionam como m´etricas de desempenho de um neg´ocio. Eles s˜ao muito

utilizados para avalia¸c˜ao das empresas, identiﬁcando aspectos positivos e negativos da compa-

nhia.

Os principais indicadores ﬁnanceiros s˜ao: O Return On Investment (ROI), Retorno sobre

Investimento, calcula o desempenho e demonstra o quanto um investidor ou uma empresa

ganhou, ou perdeu, com um investimento. O ROI ´e utilizado como um indicador de retorno de

investimentos, comparando os custos que ocorreram no processo,

ROI =

Ganhos do investimento − Custos do investimento
Custos do investimento

(1.1)

O Total Enterprise Value (TEV ) ´e um indicador que mostra o quanto um comprador deve

pagar para adquirir uma empresa, ´e a soma do valor de mercado ( o quanto a empresa vale)

com a sua d´ıvida l´ıquida ( d´ıvida menos o caixa).

TEV = Valor de mercado + D´ıvida L´ıquida

O Earnings Before Interest and Taxes (EBIT) ´e utilizado para encontrar o resultado das

opera¸c˜oes de uma empresa. Se o EBIT estiver positivo signiﬁca que a empresa de alguma

forma consegue gerar lucros com o seu neg´ocio. O motivo de utilizar o EBIT se sustenta na

9

teoria de que, atrav´es desse n´umero, tem-se condi¸c˜oes de identiﬁcar se a opera¸c˜ao da empresa

consegue render bons resultados. De forma sucinta, o EBIT ´e calculado por:

EBIT = Lucro L´ıquido + Juros + Impostos

A Margem L´ıquida, que representa qual ´e a parte do lucro de cada venda que efetivamente sobra

para a empresa, j´a descontando todos os custos (incluindo impostos). O c´alculo da margem

l´ıquida ´e

Margem L´ıquida =

Lucro L´ıquido
Total de Vendas

A Liquidez ´e a facilidade de um ativo ser transformado em dinheiro sem perdas signiﬁcativas

em seu valor. Esse conceito se refere `a agilidade com que um investidor consegue se desfazer de

um investimento para voltar a ter dinheiro na m˜ao sem que, para isso, precise ter preju´ızo. E a

Liquidez Corrente, ´e um indicador de an´alise de cr´edito, que revela quanto a empresa possui de

recursos dispon´ıveis para quitar suas obriga¸c˜oes com terceiros. Este indicador, portanto, indica

a capacidade de pagamento de uma empresa, calculado por

Liquidez Corrente =

Ativo Circulante
Passivo Circulante

O ativo circulante corresponde aos bens e direitos da empresa de curto prazo, como caixa e

disponibilidades. O passivo circulante remete aos valores de capital de terceiros de curto prazo.

Ou seja, quanto a empresa tem de d´ıvidas no per´ıodo.

Os ´ındices de mercado, s˜ao utilizados para apontar o desempenho do mercado de a¸c˜oes e au-

xiliar na hora de fazer investimentos, sejam eles de curto, m´edio ou longo prazo. Alguns ´ındices

de mercado apontam qual deve ser o comportamento geral do mercado ﬁnanceiro no futuro.

Eles reﬂetem quest˜oes sociais, pol´ıticas e econˆomicas que afetam o mercado e transformam essas

quest˜oes em uma informa¸c˜ao quantitativa, que ´e mais facilmente interpret´avel. Outros ´ındices

de mercado apontam se um ativo do mercado ﬁnanceiro ´e uma boa op¸c˜ao de investimento ou

n˜ao. A an´alise desses indicadores pode ser feita observando uma ´unica empresa e considerando

sua posi¸c˜ao em rela¸c˜ao a alguns parˆametros ou, ainda, comparando duas ou mais empresas

entre si. Dentre os principais indicadores de mercado no Brasil, pode-se destacar a Taxa Selic,

Taxa de Certiﬁcado de Dep´osito Interbanc´ario (CDI), a taxa de cˆambio entre D´olar e Real,
Ibovespa e o ´Indice Nacional de Pre¸cos ao Consumidor Amplo (IPCA).

10

A Taxa Selic ´e a taxa b´asica de juros da economia brasileira, criada em 1979 e utilizada

pelo Banco Central para manipular a inﬂa¸c˜ao e o Produto Interno Bruto (PIB), como um

instrumento das chamadas pol´ıticas monet´arias, servindo como base para os empr´estimos in-

terbanc´arios, ela tamb´em inﬂuencia a vida comum de todos os brasileiros. Como a Taxa Selic

guia as taxas cobradas pelos bancos em suas respectivas linhas de cr´edito, ela afeta a incidˆencia

de juros sobre empr´estimos, ﬁnanciamentos, cart˜oes de cr´edito e aﬁns. E por ela oferecer um

retorno baixo, mas que, de modo geral, tem apelo aos investidores e o risco ´e bastante reduzido.

Taxas que possuem uma rentabilidade esperada em um investimento com risco muito baixo s˜ao

chamadas de Taxa Livre de Risco, que servem de referˆencia no universo do mercado ﬁnanceiro,

e das ﬁnan¸cas em geral, para comparar diferentes op¸c˜oes de investimento.

O Ibovespa ´e o principal ´ındice da bolsa de valores do Brasil e ´e amplamente utilizado para

distinguir a compara¸c˜ao entre dois ativos em renda vari´avel. O Ibovespa tem uma fun¸c˜ao muito

importante, pois ele serve como referˆencia para os ganhos e perdas do mercado de a¸c˜oes no

Brasil. Ele tamb´em serve como parˆametro para fundos de ´ındices como o BOVA11. Fundo de

´ındice ´e o nome dado a um tipo espec´ıﬁco de fundo de investimentos, especialmente caracteri-

zado por seguir um ´ındice ﬁnanceiro para a escolha de t´ıtulos que ir˜ao compor a carteira. Os

fundos de ´ındice possuem as mesmas caracter´ısticas dos demais fundos de investimentos. Isso

signiﬁca que eles tamb´em s˜ao formados a partir da “uni˜ao” de v´arios investidores que, a partir

da aquisi¸c˜ao de cotas, somam os seus aportes para a compra de determinados t´ıtulos. Atrav´es

de fundos como o BOVA11, o investidor consegue investir em algo que pode lhe proporcionar

ganhos bem semelhantes ao ´ındice Ibovespa.

A volatilidade ´e uma das ferramentas mais importantes para quem atua no mercado de
a¸c˜oes. ´E deﬁnida como a varia¸c˜ao do pre¸co de a¸c˜oes em um determinado per´ıodo de tempo.

Mercados que se movem lentamente s˜ao mercados de baixa volatilidade e os que se movem

rapidamente s˜ao mercados de alta volatilidade. Essa varia¸c˜ao do pre¸co das a¸c˜oes pode ser vista

atrav´es dos dados hist´oricos ou s´eries hist´oricas de um determinado ativo. Um ativo tem como

objetivo acompanhar o resultado de indicadores ou de ´ındices, e os dados hist´oricos podem ter

um uso pr´atico de serem usados como testes de estrat´egia para supererar esses indicadores ou

´ındices em quest˜ao, pois a escolha de uma estret´egia baseada em dados pode fazer a diferen¸ca

no retorno esperado.

11

1.2 Teoria Moderna de Portf´olio

A teoria do portf´olio determina que decis˜oes, relacionadas `a sele¸c˜ao de investimentos, devem

ser tomadas baseadas na rela¸c˜ao risco-retorno. Para contribuir nesse processo, modelos de

otimiza¸c˜ao de portf´olio tˆem sido desenvolvidos, para serem efetivos. Esses modelos devem ser

capazes de quantiﬁcar os n´ıveis de risco e retorno de investimentos. O desejo do investidor,

de modo geral, quando cria um portf´olio, ´e a maximiza¸c˜ao do lucro, minimizando o risco e a

perda do que foi investido. Para que isso seja realizado, o investidor precisa utilizar de modelos

matem´aticos que sigam estes princ´ıpios.

Os conceitos que incluem a Teoria de Otimiza¸c˜ao de Portf´olio tem sido ferramentas funda-

mentais para o desenvolvimento e para a evolu¸c˜ao do conhecimento em mercado ﬁnanceiro e

tomadas de decis˜oes. A contribui¸c˜ao para essa evolu¸c˜ao quantitativa e qualitativa no mercado

ﬁnanceiro, teve in´ıcio com a publica¸c˜ao da Teoria Moderna de Portf´olio de Harry Markowitz

[18]. Este m´etodo permite a aquisi¸c˜ao de carteiras de variˆancia m´ınima para cada n´ıvel de

retorno m´edio esperado (retorno esperado). Para cada n´ıvel de retorno esperado, os portf´olios

eﬁcientes minimizam o risco, que ´e medido pela variˆancia ou desvio padr˜ao dos retornos passa-

dos obtidos atrav´es dos dados hist´oricos.

O uso dessa teoria para modelar portf´olios do mercado ﬁnanceiro parte-se da premissa de

que os investidores devem considerar o retorno esperado um fator desej´avel, e a variˆancia dos

retornos um fator indesej´avel. Portanto, relaciona-se o retorno esperado do portf´olio E(Rp)

a sua variˆancia total (V ), que corresponde ao risco total do portf´olio. Markowitz mostra que

para se obter um portf´olio com risco menor e um mesmo n´ıvel de retorno, ´e necess´ario aplicar

o princ´ıpio da diversiﬁca¸c˜ao dos investimentos no portf´olio, procurando uma baixa correla¸c˜ao

entre eles, considerando que os investidores aceitam os valores de retornos de cada ativo, de

acordo com a distribui¸c˜ao de probabilidades de seus retornos e que os investidores avaliam

as carteiras apenas com base no retorno esperado e no desvio padr˜ao dos retornos sobre um

per´ıodo estipulado. Para determinada taxa de retorno, os investidores tendem a minimizar o

risco do investimento e para um dado n´ıvel de risco, os investidores tendem a maximizar o

retorno do investimento. Para esclarecer a Teoria de Portf´olios de Markowitz ser˜ao analisados

os conceitos sobre retorno, variˆancia, correla¸c˜ao, diversiﬁca¸c˜ao e fronteira eﬁciente.

12

O retorno da carteira pode ser representado pela m´edia dos retornos obtidos ao longo do

tempo, sendo portanto igual ao valor esperado do dado hist´orico dispon´ıvel. O Retorno de um

ativo individual (Ri) pode ser calculado usando a equa¸c˜ao 1.1 e o retorno esperado do portf´olio

por:

E(Rp) =

N
(cid:88)

i=1

wiE(Ri)

onde, wi representa a taxa de participa¸c˜ao de cada ativo na composi¸c˜ao da carteira e E(Ri)

representa o retorno individual m´edio esperado do ativo i.

A avalia¸c˜ao do risco do modelo de Markowitz ´e dada pela variˆancia do portf´olio que leva em

conta a variˆancia do retorno (σ2

i ) de cada ativo e a covariˆancia entre todos os pares de ativos

do portf´olio (σij). Estes s˜ao obtidos a partir do dado hist´orico de retornos de cada ativo (Ri).

Assim, para cada Ri, tˆem-se t observa¸c˜oes hist´oricas de retornos, onde T corresponde a um

per´ıodo de tempo, discretizando em anos, meses, semanas, dias, entre outros, dependendo do

tipo de informa¸c˜ao dispon´ıvel. Os dados hist´oricos de retornos pode ser representado por uma

matriz do tipo:

S =








ρ11
...
ρT 1








· · · ρ1N
...
. . .
· · · ρT N

onde ρti corresponde ao retorno do ativo i para o per´ıodo de observa¸c˜ao t.

Se por um lado cada ativo contribui para compor o retorno esperado do portf´olio, por outro

lado contribui tamb´em para compor o risco total do portf´olio. Dado um hist´orico de retornos

de cada ativo i, quanto maior for a variˆancia da s´erie σ2

i , maior ser´a o risco de i.

A partir do dado hist´orico, deﬁni-se a variˆancia dos ativos:

σ2
i =

1
T

T
(cid:88)

(ρti − ρi)2

t=1

Mas como a m´edia de cada dado de retorno para um ativo, em particular, corresponde ao

seu retorno esperado E(Ri), a equa¸c˜ao pode ser reescrita da seguinte forma:

σ2
i =

1
T

T
(cid:88)

t=1

(ρti − E(Ri))2

13

E a covariˆancia entre dois ativos i e j ´e dada por:

σij =

1
T

T
(cid:88)

(ρti − E(Ri))(ρtj − E(Rj))

t=1

onde, E(Ri) e E(Rj) representam o retorno m´edio esperado dos ativos i e j, respectivamente.

Assim, a matriz das covariˆancias, que corresponde `a covariˆancia entre todos os pares de

ativos ´e representada por:

C =








σ2
1
...
σN 1








· · · σ1N
...
. . .
· · · σ2
N

Essa avalia¸c˜ao permite prever o qu˜ao relacionados est˜ao dois ativos diferentes. Ativos com

alto grau de correla¸c˜ao tendem a ser afetados de maneira semelhante diante de determinadas

oscila¸c˜oes. Ou seja, investimentos de um mesmo ramo de atividade, estar˜ao sujeitos e ser˜ao

afetados pelas mesmas adversidades econˆomicas. Logo, a pretens˜ao ´e buscar a diversiﬁca¸c˜ao dos

investimentos do portf´olio, visando minimizar o efeito mencionado. Faz-se necess´ario calcular

a covariˆancia entre os ativos.

A rela¸c˜ao ou n˜ao entre ativos de uma carteira ir´a determinar a minimiza¸c˜ao do risco. A

principal vari´avel para determinar a melhor rela¸c˜ao entre os ativos foi denominada por Mar-

kowitz de correla¸c˜ao e mensura o risco. O coeﬁciente de correla¸c˜ao entre dois ativos mede o

grau de varia¸c˜ao entre eles. Quanto maior sua tendˆencia a se moverem simultaneamente, mais

alto ´e seu coeﬁciente de correla¸c˜ao. A correla¸c˜ao entre dois ativos ´e dada por:

corr(Ri, Rj) =

σij
σiσj

1.2.1 Exemplo de Coeﬁciente de Correla¸c˜oes Diferentes

Considere uma carteira com dois ativos, o coeﬁciente entre os ativos varia entre −1 e 1,

sendo 1 a correla¸c˜ao positiva perfeita, −1 a correla¸c˜ao negativa perfeita e 0 a inexistˆencia de

correla¸c˜ao. A Figura 1.1 ilustra uma carteira com dois ativos A e B de correla¸c˜ao igual a 1,

eles se movem na mesma dire¸c˜ao, o que n˜ao proporciona uma melhora na carteira. Isto ocorre

porque os ativos reagem da mesma maneira ao mercado, sendo possivelmente do mesmo setor.

14

Retornos

+1

0

−1

A

B

Tempo

Figura 1.1: Correla¸c˜ao positiva perfeita = 1

Na Figura 1.2 tem-se uma correla¸c˜ao negativa igual a −1, que pode reduzir o risco da

carteira a zero ou pr´oximo disso, mantendo o retorno.

Isso ocorre porque os ativos A e B

reagem a maneiras opostas ao mercado, e possivelmente s˜ao ativos de setores diferentes.

Retornos

+1

0

−1

B

A

Tempo

Figura 1.2: Correla¸c˜ao negativa perfeita = -1

A Figura 1.3 considera os ativos A e B de correla¸c˜ao nula. Uma carteira formada por estes

ativos n˜ao ter´a redu¸c˜ao de riscos atrav´es da diversiﬁca¸c˜ao.

Retornos

+1

0

−1

B
A

Tempo

Figura 1.3: Correla¸c˜ao nula = 0

15

Com esta an´alise veriﬁca-se que um dos princ´ıpios da teoria do portf´olio ´e a redu¸c˜ao do risco

n˜ao sistem´atico a zero atrav´es da inclus˜ao de ativos em uma carteira. Com isso, a desvaloriza¸c˜ao

de um ativo seria neutralizada pela valoriza¸c˜ao do outro, favorecendo possibilidades de se reduzir

uma parte do risco diversiﬁc´avel, `a medida que cresce o n´umero de ativos. Observa-se na Figura

1.4 que conforme se amplia a diversiﬁca¸c˜ao da carteira por meio da inclus˜ao de mais ativos,

seu risco total decresce em fun¸c˜ao da elimina¸c˜ao do risco diversiﬁc´avel. Esse comportamento ´e

limitado pela presen¸ca do risco sistem´atico, comum a todos os ativos. A partir de certo n´umero

de ativos, o risco da carteira se mant´em praticamente est´avel, correspondendo unicamente a

sua parte n˜ao diversiﬁc´avel.

Variˆancia do
retorno
da carteira

Risco diversiﬁc´avel,

espec´ıﬁco, ou

n˜ao sistem´atico

Risco de carteira,

de mercado ou

sistem´atico

N´umero de
ativos

Figura 1.4: Rela¸c˜ao entre o risco e a quantidade de ativos na carteira

O risco de um ativo pode ser reduzido por meio da diversiﬁca¸c˜ao, permanecendo somente

o elemento sistem´atico, que est´a relacionado com o comportamento do mercado. Dessa forma,

ao compor uma carteira de ativos, a medida relevante passa a ser o risco sistem´atico, j´a que o

outro componente pode ser eliminado pela diversiﬁca¸c˜ao de ativos.

1.2.2 Fronteira Eﬁciente

Dado um conjunto de ativos, ´e poss´ıvel combin´a-los formando novas carteiras. Considere

o plano cartesiano bi-dimensional no qual x e y s˜ao coordenadas que representam o risco e o

retorno esperado, respectivamente, e o conjunto formado por todos os portf´olios eﬁcientes com

todos os poss´ıveis pares de portf´olio eﬁciente. Este conjunto forma a Fronteira Eﬁciente.

16

Atrav´es da teoria de Markowitz, os investidores podem determinar todas as carteiras ´otimas,

no sentido risco e retorno, e formar a Fronteira Eﬁciente. Esta, por sua vez, pode ser descrita

como o melhor conjunto poss´ıvel de carteiras, isto ´e, todas as carteiras tˆem o m´ınimo n´ıvel de

risco para dado n´ıvel de retorno. Os investidores se concentrariam na sele¸c˜ao de uma melhor

carteira na Fronteira Eﬁciente e ignorariam as demais consideradas inferiores.

A Figura 1.5 ´e a visualiza¸c˜ao da Fronteira Eﬁciente, onde a parte superior da borda ´e

formada por todo o conjunto de carteiras ´otimas.

E(R)

Q

Portf´olio de mercado

Linha de mercado de capitais

M

S

T

Fronteira eﬁciente

Taxa livre de risco

Figura 1.5: Fronteira Eﬁcente de Markowitz

σ

Existem v´arias terminologias oriundas do estudo sobre Fronteira Eﬁciente:

• Portf´olios de variˆancia m´ınima s˜ao chamados de portf´olios de m´edia-variˆancia.

• O grupo formado por todos estes portf´olios ´e chamado de Fronteira Eﬁciente.

• Adicionando o ativo livre de risco, a fronteira eﬁciente se torna uma linha reta no sistema

de coordenadas retorno esperado/risco (desvio-padr˜ao). Esta linha ´e chamada de linha

de mercado de capitais.

• o ponto de tangˆencia da fronteira eﬁciente com somente ativos de risco e a linha de capitais

de mercado ´e chamado portf´olio tangente ou portf´olio de mercado.

A curva de Fronteira Eﬁciente cont´em as carteiras com menor n´ıvel de risco e maior n´ıvel

de retorno. Dentro dessa curva, pode-se encontrar diferentes perﬁs de risco e retorno, os

quais devem se adequar ao perﬁl do investidor. A curva representa as melhores carteiras para

diferentes perﬁs de risco. A grande maioria dos investidores est´a interessada em manter sempre

17

o retorno desejado. Para isso, uma quest˜ao a ser considerada ´e a possibilidade de reduzir o risco

do portf´olio, mantendo a expectativa de retorno constante, aumentando o universo de ativos.

Assim, o modelo de Markowitz [18], recomenda que o retorno esperado para um conjunto

de ativos ´e a m´edia ponderada dos retornos esperados para cada ativo individual. J´a o risco

deste conjunto de ativos n˜ao ´e a m´edia dos riscos dos ativos individuais, mas uma fun¸c˜ao das

variˆancias individuais de cada ativo e de uma parcela das covariˆancias entre os ativos, calculadas

dois a dois. O problema existente para a aplica¸c˜ao da teoria proposta por Markowitz naquela

´epoca, devido a quantidade e certa diﬁculdade dos c´alculos necess´arios ao seu desenvolvimento,

levou Sharpe [22] a desenvolver um modelo simpliﬁcado. Em seu modelo, diferentemente de

Markowitz, n˜ao parte do pressuposto que os retornos entre os ativos est˜ao correlacionados entre
si, mas sim com um ´ındice ´unico, chamado de ´Indice Beta β, que compara a volatilidade do

ativo para com o mercado, ao inv´es da utiliza¸c˜ao de covariˆancia. Assim, diminui os c´alculos

a serem efetuados, ainda que tenha uma eventual perda de precis˜ao, dadas as simpliﬁca¸c˜oes
introduzidas. O c´alculo do ´Indice Beta utiliza-se a varia¸c˜ao conjunta da rentabilidade do

investimento com o mercado, calculando a covariˆancia entre estes dois rendimentos, dividindo

pela variˆancia do mercado.

Em 1966, William F. Sharpe desenvolveu o que hoje ´e conhecido como ´Indice Sharpe [23],

este ´ındice indica o retorno que um investimento oferece descontando o quanto um investidor

teria se tivesse escolhido por outro investimento menos arriscado. Para fazer essa compara¸c˜ao,
o ´Indice Sharpe baseia-se no retorno de um ativo (Ri), no rendimento do investimento com a

taxa livre de risco (RF ) que ´e base da compara¸c˜ao e na volatilidade do ativo σi que se deseja

analisar, que pode ser calculado por:

ISharpe =

Ri − RF
σi

Um alto valor no ´Indice Sharpe geralmente indica que o ativo em quest˜ao compromete a

superar o desempenho m´edio de outras aplica¸c˜oes correndo poucos riscos. Um valor baixo ap´os

o c´alculo do ´ındice, entretanto, pode ser sinal de que o ativo tenha uma gest˜ao passiva e pouco

preocupada em fazer com que seus investidores corram menos riscos.

Um modelo matem´atico que se utiliza da taxa livre de risco para analisar o retorno e risco

de investimentos para decidir qual ´e a melhor escolha de ativos para compor a carteira ´e o

Capital Asset Pricing Model (CAPM), Modelo de Preciﬁca¸c˜ao de Ativos Financeiros. Esse

modelo busca calcular um equil´ıbrio entre o risco e a rentabilidade e, com isso, atribuir uma

18

preciﬁca¸c˜ao aos ativos com risco de uma carteira de investimentos. Al´em do investimento em

ativos ﬁnanceiros, o modelo permite identiﬁcar o valor de um projeto, como em um processo

produtivo. O c´alculo leva em considera¸c˜ao a parte dos riscos do investimento, com a parte livre

de riscos, ou menos arriscada poss´ıvel:

E(R) = RF + β(E(RM ) − RF )

onde, E(R) ´e o retorno esperado que o modelo busca calcular, RF ´e a taxa de juros livre de
risco, β ´e o ´Indice Beta, que relaciona a dire¸c˜ao que um investimento toma conforme varia¸c˜oes

no mercado, ou seja, o risco do investimento comparado a varia¸c˜oes na Bovespa, e E(RM ) ´e o

retorno do indicador de mercado. O modelo utiliza a rentabilidade do mercado como um todo.
´E poss´ıvel, neste caso, utilizar a rentabilidade do ´Indice Bovespa no per´ıodo selecionado.

1.3 Modelo M´edia-Variˆancia

A partir dos conceitos que descrevem a m´edia, a variˆancia entre ativos e visando obter

portf´olios eﬁcientes, ´e poss´ıvel formular o modelo cl´assico de Markowitz para a otimiza¸c˜ao de

portf´olios da seguinte maneira:

E(Rp) =

N
(cid:88)

i=1

wiE(Ri)

V =

N
(cid:88)

N
(cid:88)

i=1

j=1

σijwiwj

N
(cid:88)

i=1

wi = 1

wi ≥ 0, i = 1, 2, . . . , N

(1.2)

(1.3)

(1.4)

(1.5)

A equa¸c˜ao 1.2 apresenta o retorno esperado do portf´olio, a equa¸c˜ao 1.3 apresenta a variˆancia

total do portf´olio. A equa¸c˜ao 1.4 indica que a taxa de participa¸c˜ao wi de cada investimento

deve totalizar 100% do investimento do portf´olio. A equa¸c˜ao 1.5 imp˜oe a n˜ao-negatividade ao

conjunto de investimentos wi.

O problema de m´edia-variˆancia pode ser formulado como um problema de otimiza¸c˜ao n˜ao-

linear, cujo objetivo ´e obter o valor m´ınimo de variˆancia para determinado n´ıvel de retorno

19

desejado. A equa¸c˜ao 1.3 ´e deﬁnida sendo a fun¸c˜ao objetivo a ser minimizada e a equa¸c˜ao

1.2 corresponde a uma restri¸c˜ao de retorno m´ınimo desejado indicada por E(R0), conforme a

equa¸c˜ao 1.6 .

minimizar

V =

N
(cid:88)

N
(cid:88)

i=1

j=1

σijwiwj

sujeito a:

N
(cid:88)

i=1

wiE(Ri) ≥ E(R0)

N
(cid:88)

i=1

wi = 1

wi ≥ 0, i = 1, 2, . . . , N

(1.6)

Alternativamente, ´e poss´ıvel modelar o problema de otimiza¸c˜ao deﬁnindo a equa¸c˜ao 1.2

como fun¸c˜ao objetivo, maximizando o retorno esperado, sujeito a um n´ıvel m´aximo de risco

que o investidor est´a disposto a assumir. A equa¸c˜ao 1.3 ´e uma restri¸c˜ao de risco. Assim, a

formula¸c˜ao do problema ´e:

maximizar

N
(cid:88)

wiE(Ri)

sujeito a:

i=1
N
(cid:88)

N
(cid:88)

i=1

j=1

σijwiwj ≤ V

N
(cid:88)

i=1

wi = 1

wi ≥ 0, i = 1, 2, . . . , N

1.4 Modelo de Preciﬁca¸c˜ao de Ativos Financeiros

Em um portf´olio onde n˜ao ´e not´avel a presen¸ca de ativos com e sem riscos, a fronteira

eﬁciente de cada investidor ser´a levada em conta seus n´ıveis de avers˜ao ao risco, de maneira que

cada investidor apresentar´a uma fronteira eﬁciente diferente. Em contrapartida, na presen¸ca

de ativos livres de risco, as carteiras escolhidas por qualquer investidor podem ser identiﬁcadas

sem levar em conta suas preferˆencias de risco.

20

A Figura 1.6 exempliﬁca a curva BC de fronteira eﬁciente sem ativo livre de risco, enquanto

ABC representa o conjunto de carteiras de varia¸c˜ao m´ınima.

E(R)

B

C

A

σ

Figura 1.6: Fronteira Eﬁcente sem ativo livre de risco

Quando ´e introduzido ativos livres de risco, a carteira de qualquer investidor pode ser

identiﬁcada sem levar em conta as preferˆencias de risco do investidor. Este portf´olio encontra-

se no ponto de tangˆencia Pi entre a fronteira eﬁciente de ativos original e na reta que passa

pelo retorno sem risco RF (no eixo vertical) e pelo ponto de tangˆencia Pi. Isso ´e ilustrado na

Figura 1.7, onde Pi representa o portf´olio de risco do investidor. Os investidores satisfazem

suas preferˆencias de risco, combinando o portf´olio Pi com ativos livres de risco.

C

Linha de mercado de capitais

Pi

E(R)

RF

B

Figura 1.7: Fronteira Eﬁciente com ativo livre de risco

σ

A

Se todos os investidores tˆem expectativas homogˆeneas e todos tem ativos com a mesma taxa

de retorno, ent˜ao cada um deles ter˜ao uma fronteira eﬁciente como o da Figura 1.7. Al´em disso,

21

todas as fronteiras ser˜ao idˆenticas. O portf´olio de ativos de risco Pi de qualquer investidor ser´a

idˆentica ao portf´olio de ativos de risco de qualquer outro investidor. Se todos os investidores

mantˆem o mesmo portf´olio de risco, ent˜ao esse ´e o portf´olio de mercado M ou a carteira de

mercado M .

A reta representada na Figura 1.7 ´e a linha de mercado de capitais. Todos os investidores

ter˜ao carteiras em algum lugar ao longo da linha do mercado de capitais, e todas as carteiras

eﬁcientes estariam ao longo da linha de mercado de capitais. No entanto, nem todos os ativos

ou as carteiras encontram-se ao longo da linha do mercado de capitais.

Assim, a fun¸c˜ao do Modelo de Preciﬁca¸c˜ao de Ativos (CAPM) ´e:

E(Ri) = RF + βi(E(RM ) − RF )

(1.7)

onde, E(Ri) representa o retorno esperado, RF o retorno do ativo livre de risco, E(RM ) o

retorno do indicador de mercado e βi o risco sistem´atico.

A partir da deriva¸c˜ao da fronteira eﬁciente, sabe-se que todas as carteiras de ativos com

e sem risco, exceto aqueles que s˜ao eﬁcientes, encontram-se abaixo da linha de mercado de

capitais. Atrav´es dessa observa¸c˜ao, tem-se o teorema a seguir.

Teorema 1.1. Existe um ´unico valor Pi de ativos de risco tal que qualquer portf´olio eﬁciente

pode ser constru´ıdo como uma combina¸c˜ao do valor Pi e do ativo livre de risco.

Demonstra¸c˜ao: Considere um ponto qualquer na regi˜ao eﬁciente, construa uma reta entre

o ativo livre de risco e aquele ponto. Denota-se o ˆangulo entre a linha tra¸cada e o eixo horizontal

por θ. Para qualquer portf´olio M de ativos de risco, a tangente do ˆangulo θ ´e dada por:

tan θ =

RM − RF
σM

onde RM ´e o retorno esperado do portf´olio M , RF ´e o retorno esperado do ativo livre de risco

e σM ´e o desvio padr˜ao do portf´olio M .

22

A rela¸c˜ao linear entre o beta e o retorno pode ser analisada na ﬁgura 1.8 .

E(Ri)

RM

RF

M

1.0

Beta

β

Figura 1.8: Rela¸c˜ao Retorno-Beta

Logo, o CAPM diz que o retorno esperado ´e igual `a taxa sem risco, acrescido de um prˆemio

pelo risco de se investir nesse ativo, de modo que se observa uma rela¸c˜ao linear positiva entre

o risco sistem´atico e a rentabilidade esperada.

23

Cap´ıtulo 2

Aplica¸c˜oes aos Problemas de

Otimiza¸c˜ao de Portf´olio

O objetivo principal deste cap´ıtulo consiste em exibir as aplica¸c˜oes dos modelos de Mar-

kowitz e o Modelo de Preciﬁca¸c˜ao de Ativos Financeiros (CAPM) em carteiras de portf´olios.

Al´em disso, ser´a apresentada uma aplica¸c˜ao envolvendo o princ´ıpio de diversiﬁca¸c˜ao de ativos

utilizando como estrat´egia de investimento o Deep Value Investing juntamente com o Modelo

M´edia-Variˆancia. Por ﬁm, uma aplica¸c˜ao no Ensino.

2.1 Aplica¸c˜ao da Fronteira de Markowitz - Cen´ario com

2 ativos

O crit´erio para esta aplica¸c˜ao utiliza-se de dados hist´oricos de ativos para estimar os retornos

e riscos esperados, de modo a evitar a subjetividade e a diﬁculdade em fazer previs˜oes. Isso

parte do pressuposto que os dados passados s˜ao relevantes na determina¸c˜ao de dados futuros.

Nesta aplica¸c˜ao foram utilizados os dados hist´oricos das a¸c˜oes de duas empresas de capital

aberto na Bolsa de Valores Oﬁcial do Brasil (B3) [8], os dados dos ativos selecionados foram

adquiridos da base de dados do Yahoo Finan¸cas [26] as an´alises foram feitas mensalmente, no

per´ıodo de 2 anos, de 31 de dezembro de 2018 a 30 de novembro de 2020.

A Fronteira Eﬁciente de Markowitz entre 2 ativos foi constru´ıda atrav´es do editor de plani-
lhas Excel® 16.0 para armazenar os dados referentes as cota¸c˜oes dos ativos da Magazine Luiza

S.A. (MGLU3.SA) e da Lojas Renner S.A. (LREN3.SA).

24

O retorno mensal dos ativos e do portf´olio foram calculados com uma taxa de participa¸c˜ao

de 50% de cada ativo no per´ıodo analisado, conforme a Tabela 2.1, e a m´edia, a variˆancia, o

desvio padr˜ao, a covariˆancia e a correla¸c˜ao dos ativos presentes na Tabela 2.2.

Magazine Luiza S.A.

Lojas Renner S.A.

Magazine Luiza S.A.

Lojas Renner S.A.

Portf´olio

MGLU3.SA

Fechamento

LREN3.SA

MGLU3.SA

LREN3.SA

Fechamento

Retorno (%)

Retorno (%)

Retorno (%)

24,92

23,36

24,6

22,28

23,17

20,04

17,79

15,98

12,13

9,52

12,33

13,61

11,63

10,98

10,86

9,02

8,83

8,02

6,42

5,96

5,81

5,25

5,27

5,42

43,47

44,6

37,39

39,5

43,31

40,98

41,58

38,34

37,76

32,95

52,33

56,4

55,09

50,78

49,75

49,4

49,48

46,45

46,08

43,03

41,12

38,33

37,88

39,82

6,68%

-5,04%

10,41%

-3,84%

15,62%

12,65%

11,33%

31,74%

27,42%

-22,79%

-9,40%

17,02%

5,92%

1,10%

20,40%

2,15%

10,10%

24,92%

7,72%

2,58%

10,67%

-0,38%

-2,77%

-2,53%

19,28%

-5,34%

-8,80%

5,69%

-1,44%

8,45%

1,54%

14,60%

-37,03%

-7,22%

2,38%

8,49%

2,07%

0,71%

-0,16%

6,52%

0,80%

7,09%

4,64%

7,28%

1,19%

-4,87%

2,07%

7,12%

2,54%

-6,32%

10,65%

5,60%

9,89%

16,64%

21,01%

-29,91%

-8,31%

9,70%

7,20%

1,59%

10,55%

1,00%

8,31%

12,86%

7,40%

3,61%

8,97%

0,40%

-3,82%

Data

30 de nov. de 2020

31 de out. de 2020

01 de out. de 2020

01 de set. de 2020

01 de ago. de 2020

01 de jul. de 2020

01 de jun. de 2020

01 de mai. de 2020

01 de abr. de 2020

01 de mar. de 2020

31 de jan. de 2020

31 de dez. de 2019

30 de nov. de 2019

31 de out. de 2019

01 de out. de 2019

01 de set. de 2019

01 de ago. de 2019

01 de jul. de 2019

01 de jun. de 2019

01 de mai. de 2019

01 de abr. de 2019

01 de mar. de 2019

31 de jan. de 2019

31 de dez. de 2018

Tabela 2.1: Cota¸c˜ao e Retorno dos 2 ativos

Magazine Luiza S.A.

Lojas Renner S.A.

MGLU3.SA

LREN3.SA

Portf´olio

Retorno (%)

Retorno (%)

Retorno (%)

M´edia

Variˆancia

7,57%

1,01%

4,29%

0,014915666

0,010787262

0,009827665

Desvio Padr˜ao

12,21%

10,39%

9,91%

Covariˆancia

Correla¸c˜ao

0,006803865

0,536387629

Tabela 2.2: Dados Estat´ısticos dos 2 ativos e do portf´olio

25

Para construir o gr´aﬁco da Fronteira de Markowitz foram realizadas combina¸c˜oes na taxa

de participa¸c˜ao dos ativos de 5% em 5% e calculado a m´edia, a variˆancia e o desvio padr˜ao dos

ativos conforme a Tabela 2.3. Tem-se que os valores do desvio padr˜ao s˜ao representados por

valores em x e os valores da m´edia s˜ao representados por valores em y.

Taxa de Participa¸c˜ao

MGLU3.SA LREN3.SA M´edia Variˆancia Desvio Padr˜ao

0,00%

5,00%

10,00%

15,00%

20,00%

25,00%

30,00%

35,00%

40,00%

45,00%

50,00%

55,00%

60,00%

65,00%

70,00%

75,00%

80,00%

85,00%

90,00%

95,00%

100,00%

100,00%

1,01% 0,010787262

95,00%

1,34% 0,01041916

90,00%

1,67% 0,010111535

85,00%

2,00% 0,009864385

80,00%

2,33% 0,009677711

75,00%

2,65% 0,009551513

70,00%

2,98% 0,009485792

65,00%

3,31% 0,009480546

60,00%

3,64% 0,009535776

55,00%

3,97% 0,009651482

50,00%

4,29% 0,009827665

45,00%

4,62% 0,010064323

40,00%

4,95% 0,010361457

35,00%

5,28% 0,010719067

30,00%

5,61% 0,011137153

25,00%

5,93% 0,011615715

20,00%

6,26% 0,012154753

15,00%

6,59% 0,012754268

10,00%

6,92% 0,013414258

5,00%

0,00%

7,25% 0,014134724

7,57% 0,014915666

10,39%

10,21%

10,06%

9,93%

9,84%

9,77%

9,74%

9,74%

9,77%

9,82%

9,91%

10,03%

10,18%

10,35%

10,55%

10,78%

11,02%

11,29%

11,58%

11,89%

12,21%

Tabela 2.3: Retorno e Risco dos 2 ativos variando a taxa de participa¸c˜ao

Atrav´es do gr´aﬁco da Figura 2.1 observa-se que a Lojas Renner S.A. tem o retorno mais

baixo de 1, 01% com um risco de 10, 39% e que a Magazine Luiza S.A. tem o maior retorno de

7, 57% com um risco mais alto que o da Lojas Renner S.A. de 12, 21%.

26

Figura 2.1: Fronteira Eﬁcente de Markowitz Para os 2 ativos

O portf´olio de risco m´ınimo ´e aquele que consegue dentre as combina¸c˜oes gerar um retorno

maior correndo um menor risco. Logo, ´e poss´ıvel visualizar que o portf´olio de risco m´ınimo

ocorre quando ´e investido 65% na Lojas Renner S.A. e 35% na Magazine Luiza S.A. gerando

um retorno m´edio de 3, 31% com um risco de 9, 74%.

2.2 Aplica¸c˜ao - Cen´ario com 6 ativos

Quando se considera uma quantidade maior que 2 ativos as taxas de participa¸c˜ao de ativos

podem ser variadas, isso faz com que aumente a quantidade de c´alculos para gerar a fronteira

eﬁciente. Assim, para viabilizar uma aplica¸c˜ao com um maior n´umero de ativos foi utilizado

Google Colaboratory [14], um documento execut´avel que permite escrever c´odigos Phyton no

navegador, para implementar o Modelo M´edia-Variˆancia. O c´odigo utilizado na aplica¸c˜ao se

encontra no Apˆendice A, e por utilizar dados on line do Yahoo Finan¸cas o c´odigo ﬁca sujeito a

adapta¸c˜oes.

Considerando o cen´ario com 5 ativos do mercado brasileiro foi adotado a estrat´egia de

investimentos de Luiz Barsi Filho [9], o maior investidor pessoa f´ısica do Brasil, que utiliza

da an´alise fundamentalista para examinar os fundamentos, o hist´orico de dividendos e a sa´ude

ﬁnanceira, perspectiva do setor e comprometimento do gestor. Foi escolhido 1 ativo para ser

usado como referˆencia para veriﬁcar se a carteira tem um rendimento maior ou menor que o

´ındice Ibovespa. Os principais pontos para a escolha de uma boa a¸c˜ao s˜ao:

27

• Setores cujos produtos ou servi¸cos s˜ao consumidos por longos per´ıodos de tempo, que s˜ao

considerados setores perenes, dentre eles est˜ao o setor banc´ario, transmiss˜ao e distribui¸c˜ao

de energia el´etrica, papel e celulose.

• Empresas Lucrativas e que tenham boa gest˜ao.

• Empresas que distribuem dividendos regularmente.

As 5 a¸c˜oes escolhidas, segundo os crit´erios supracitados s˜ao: Ita´u Unibanco (ITUB3.SA), o

maior banco do Brasil; a TAESA (TAEE3.SA), um dos maiores grupos privados de transmiss˜ao

de energia el´etrica do Brasil em termos de Receita Anual Permitida (RAP); a Unipar Carbo-

cloro (UNIP3.SA), empresa qu´ımica fabricante de cloro, soda e derivados para usos industriais;

a Klabin (KLBN3.SA), a maior produtora e exportadora de pap´eis do Brasil, com foco na

produ¸c˜ao de celulose, pap´eis e cart˜oes para embalagens, embalagens de papel˜ao ondulado e

sacos industriais, al´em de comercializar madeira em toras; e o Grupo Energisa (ENGI3.SA),

composta por 18 empresas, 13 delas empresas de distribui¸c˜ao de energia el´etrica, o sexto maior

Grupo de distribui¸c˜ao de energia do Brasil. E a a¸c˜ao utilizada para comparar com o ´ındice

Ibovesa foi o BOVA11, que ´e um fundo de ´ındice que apresenta rentabilidade semelhante ao

Ibovespa (IBOV), o principal ´ındice da B3, a Bolsa de valores brasileira, e por ser uma cota¸c˜ao

mais acess´ıvel. Portanto, ´e poss´ıvel come¸car a investir nesse ativo mesmo com pouco dinheiro.

Primeiramente foi adquirido os dados hist´oricos da base de dados do Yahoo Finan¸cas [26],

no per´ıodo de 5 anos, de 2016 a 2020 conforme a Tabela 2.4, que cont´em 1242 dados (linhas)

de cada um dos 6 ativos (colunas).

28

Ativos

Data

ITUB3.SA TAEE3.SA UNIP3.SA KLBN3.SA ENGI3.SA BOVA11.SA

2016-01-04

10.639608

6.562332

2.779724

2.100812

2.392282

41.099998

2016-01-05

10.865295

6.562332

2.779724

2.100812

2.392282

41.180000

2016-01-06

10.800815

6.562332

2.779724

2.100812

2.392282

40.500000

2016-01-07

10.671846

6.562332

2.779724

2.100812

2.392282

39.470001

2016-01-08

10.837661

6.562332

2.779724

2.100812

2.392282

39.340000

...

...

...

...

...

...

...

2020-12-22

27.236879

11.000000

45.950001

5.220000

16.161219

112.250000

2020-12-23

27.651653

10.970000

46.750000

5.110000

16.742628

113.139999

2020-12-28

28.076303

11.210000

47.000000

5.090000

16.752481

114.699997

2020-12-29

27.967672

11.200000

46.950001

5.210000

16.693356

114.970001

2020-12-30

27.582525

11.200000

48.900002

5.390000

16.762337

114.650002

Tabela 2.4: Dados Hist´oricos dos 6 ativos

Foi gerado um arquivo no formato csv para salvar essa base de dados, caso ocorra algum

problema na comunica¸c˜ao dos dados, como uma falha no servidor do Yahoo Finan¸cas, altera¸c˜ao

de nome de algum ativo da bolsa, ou altera¸c˜ao na biblioteca utilizada. A Tabela 2.5 cont´em

os dados estat´ısticos das cota¸c˜oes dos ativos no per´ıodo analisado, contendo a quantidade de

dados observados, a m´edia, desvio padr˜ao, o valor m´ınimo e m´aximo de cada ativo, atrav´es

desta tabela foram feitos alguns gr´aﬁcos para realizar a an´alise de dados.

Ativos

ITUB3.SA TAEE3.SA UNIP3.SA KLBN3.SA ENGI3.SA BOVA11.SA

Quantidade

1242.000000

1242.000000

1242.000000

1242.000000

1242.000000

1242.000000

M´edia

22.094043

7.212610

19.348316

4.635559

8.751082

77.553543

Desvio Padr˜ao

5.544078

1.443817

12.718730

1.230359

3.942694

18.893810

Valor M´ınimo

9.916484

4.719513

2.594699

2.100812

2.038414

36.450001

25%

50%

75%

18.205039

5.747649

4.009305

4.011260

5.336030

62.200001

22.298738

7.151644

25.881572

4.635306

8.901560

76.500000

26.934077

8.371744

30.053031

5.300899

12.339122

93.749998

Valor M´aximo

31.322224

11.277073

48.267452

8.435992

17.442291

115.209999

Tabela 2.5: Dados Estat´ısticos dos 6 ativos

O primeiro foi um histograma (Figura 2.2) dos ativos para tornar f´acil a visualiza¸c˜ao dos

dados hist´oricos, veriﬁcando a frequˆencia do valor de cota¸c˜oes e a varia¸c˜ao de cada ativo no

decorrer destes 5 anos, no eixo x tem-se o valor das cota¸c˜oes de cada ativo e no eixo y tem-se

a contagem de quantas vezes cada faixa de valores aparecem no per´ıodo analisado.

29

Figura 2.2: Histograma dos 6 ativos

O segundo foi um Box Plot, diagrama de caixa (Figura 2.3), para visualizar o valor m´ınimo

e o valor m´aximo de cada a¸c˜ao. No Box Plot ´e poss´ıvel visualizar o valor m´ınimo na primeira

linha vertical, 25% das cota¸c˜oes na segunda linha vertical, a mediana na terceira linha vertical,

75% das cota¸c˜oes na quarta linha vertical e o valor m´aximo na quinta linha vertical. Observa-se

que na a¸c˜ao da KLBN3.SA tem um outlier, isso signiﬁca que houve uma subida repentina da

a¸c˜ao que acabou saindo fora do padr˜ao da base de dados. Portanto, o Box Plot ´e interessante

para identiﬁcar a¸c˜oes que tiveram uma valoriza¸c˜ao alta repentina ou uma desvaloriza¸c˜ao alta

repentina.

Figura 2.3: Boxplot dos 6 ativos

30

E o terceiro foi o gr´aﬁco de linhas com o hist´orico das a¸c˜oes (Figura 2.4). Para fazer o

comparativo entre as a¸c˜oes foi preciso normalizar os valores das a¸c˜oes para analisar o crescimento

proporcional de cada uma delas. A importˆancia deste gr´aﬁco ´e a possibilidade de visualizar o

comportamento da valoriza¸c˜ao ou desvaloriza¸c˜ao da carteira de investimentos.

Foi calculado o retorno anual de cada ativo, multiplicando o retorno m´edio di´ario por 246

(m´edia de dias por ano que a Bolsa funciona), e o retorno m´edio anual da carteira, somando

o retorno dos ativos exceto o BOVA11 e dividindo por 5 para comparar se a composi¸c˜ao da

carteira tem um melhor ou pior desempenho que o ´ındice Ibovespa.

Figura 2.4: Hist´orico do pre¸co das a¸c˜oes - normalizado

Pela Figura 2.5 ´e poss´ıvel visualizar que com essa composi¸c˜ao, a carteira composta por esses

ativos com uma mesma taxa de participa¸c˜ao j´a supera o ´ındice Ibovespa tendo assim um melhor

retorno, por´em n˜ao o mais eﬁciente.

Figura 2.5: Comparativo Carteira x BOVA11

31

Por ﬁm, de acordo com os c´alculos, o maior retorno obtido foi do ativo UNIP3.SA e o pior

desempenho foi do ativo TAEE3.SA (Tabela 2.6).

Ativos

Retorno (%)

ITAU

23.337882

TAESA

16.510067

UNIP

66.295147

KLABIN

45.131770

ENERGISA

61.780884

BOVA

24.249759

Tabela 2.6: Retorno M´edio Anual dos 6 ativos

Al´em dos retornos, calculou-se a variˆancia e a covariˆancia dos ativos, os quais est˜ao dispostos

no gr´aﬁco de calor da Figura 2.6, que representa a volatilidade dos ativos, quanto mais vermelho

indica maior risco e mais azul menor risco. Assim, o ativo da KLBN3.SA apresenta a maior

variˆancia, a ENGI3.SA a segunda maior variˆancia, e a maior covariˆancia dos ativos ITUB3.SA

e BOVA11.SA.

Figura 2.6: Volatilidade dos 6 ativos

Para obter a carteira eﬁciente foi necess´ario gerar 10000 carteiras randˆomicas com diversas
taxas de participa¸c˜oes e calcular o ´Indice Sharpe de cada uma delas utilizando a Taxa Selic dos

anos de 2016 a 2020. Com isso, tem-se o gr´aﬁco das carteiras na Figura 2.7, onde os pontos

do gr´aﬁco representam as 10000 carteiras, no eixo x tem-se a volatilidade esperada e no eixo y

tem-se o retorno esperado da carteira.

32

A carteira de risco m´ınimo ´e a que apresenta o melhor ´Indice Sharpe representada pelo ponto

vermelho com um retorno esperado de 39, 80% e com uma volatilidade esperada de 23, 22%.

Figura 2.7: Fronteira Eﬁciente de Markowitz para os 6 ativos

Portanto, a carteira de risco m´ınimo conta com uma taxa de participa¸c˜ao de 34, 05% de

ITUB3.SA, 9, 92% de TAEE3.SA 30, 26% de UNIP3.SA, 10, 28% de KLBN3.SA, 9, 21% de

ENGI3.SA e 6, 28% de BOVA11.SA. Pela Figura 2.8 ´e poss´ıvel conﬁrmar que o comportamento

do gr´aﬁco da carteira com taxas de participa¸c˜oes iguais com a carteira otimizada s˜ao parecidos,

ou seja, elas tem volatilidades semelhantes por´em a carteira otimizada apresenta um melhor

retorno. Para exempliﬁcar, caso uma pessoa f´ısica investisse um valor de R$5000, 00 na carteira

de risco m´ınimo no ﬁnal desses 5 anos ela teria um valor de R$37297, 49.

Figura 2.8: Comparativo: Carteira x Carteira Otimizada

33

2.3 Aplica¸c˜ao - Preciﬁca¸c˜ao de 5 ativos com CAPM

Nesta aplica¸c˜ao ´e utilizado o Modelo de Preciﬁca¸c˜ao de Ativos (CAPM). A base de dados

utilizada ´e a mesma que da se¸c˜ao 3.2, com os ativos Ita´u, Taesa, Unip, Klabin e Energisa,

analisadas no mesmo per´ıodo, de 2016 a 2020. O objetivo desta aplica¸c˜ao ´e comparar a carteira

com o ´ındice Ibovespa. O c´odigo utilizado nesta aplica¸c˜ao se encontra no Apˆendice B, e por

utilizar dados on line do Yahoo Finan¸cas o c´odigo ﬁca sujeito a adapta¸c˜oes. Primeiramente foi

feito o c´alculo do ´ındice Beta para todas as a¸c˜oes do portf´olio, que pode ser encontrado usando

a Regress˜ao Linear ou usando a covariˆancia e a variˆancia dos 5 ativos com o BOVA11 que ´e o

ativo utilizado para comparar com o ´ındice Ibovespa.

Para determinar o ´ındice Beta foi utilizada a regress˜ao linear simples, uma t´ecnica estat´ıstica

que busca comparar a taxa de retorno de um ativo com o BOVA11, que pode ser apresentada

por de uma reta. Considerando, BOVA11 × ITUB3.SA, a reta que aproxima os dados dos

retornos ´e

y = 0.8266413682322937x + 0.00013371453782834076

conforme a Figura 2.9. Assim, tem-se que 0.8266413682322937 ´e o Beta do ativo da ITUB3.SA.

Figura 2.9: Comparativo dos Retornos: BOVA x ITAU

O outro modo para encontrar o Beta do ativo da ITUB3.SA ´e feito por

βIT AU =

Covariˆancia entre ITAU e BOVA11
Variˆancia do BOVA11

34

Assim,

βIT AU =

0.06378675621012052
0.07716376007956556

= 0.8266413682322937

Encontrado o Beta das 5 a¸c˜oes o pr´oximo passo foi calcular o retorno esperado de cada

ativo atrav´es da Equa¸c˜ao 1.7. Assim, a Tabela 2.7 apresenta o retorno esperado de cada ativo.

Nota-se pela Tabela 2.7 que um investimento feito no ativo ITUB3.SA tem o melhor ganho de

21.42% de retorno compensado pelo risco em investir neste ativo, enquanto a TAEE3.SA tem o

menor ganho de 11.76% de retorno compensado pelo risco em investir no ativo. O interessante

dessa m´etrica ´e combin´a-la com outros c´alculos j´a feitos.

Ativos

Retorno Esperado E(Ri)

ITAU

21.41658265341971

TAESA

11.760988565296502

UNIP

14.56354091260903

KLABIN

15.173620719781573

ENERGISA

13.644180155843097

Tabela 2.7: Retorno Esperado dos 5 ativos

Logo, o c´alculo do CAPM do portf´olio eﬁciente da se¸c˜ao 3.2 ´e realizado atrav´es da equa¸c˜ao

1.2, onde os wi s˜ao as taxas de participa¸c˜oes do portf´olio eﬁciente:

E(Rp) = 0, 3405∗21, 42+0, 0992∗11, 76+0, 3026∗14, 56+0, 1028∗15, 17+0, 0921∗13, 65 = 15, 68

Portanto, o portf´olio eﬁciente tem um ganho de 15, 68% de retorno compensado pelo risco de

se investir neste portf´olio.

2.4 Aplica¸c˜ao - Cen´ario com 20 ativos

O objetivo desta aplica¸c˜ao ´e mesclar uma estrat´egia de sele¸c˜ao de a¸c˜oes, o Deep Value

Investing [27], com o modelo M´edia-Variˆancia de Markowitz. O Deep Value Investing segue

a premissa de que o mercado ﬁnanceiro n˜ao ´e totalmente eﬁciente.

Isso faz com que a¸c˜oes

ﬁquem preciﬁcadas acima ou abaixo do seu valor real. O motivo disso ocorrer pode ser por

ter problemas na administra¸c˜ao ou descren¸ca sobre o futuro da empresa, perspectivas ruins no

setor ou por ter o pre¸co das a¸c˜oes cair muito constantemente. Dessa forma, caso um investidor

compre uma a¸c˜ao descontada em rela¸c˜ao ao seu valor real, e se as expectativas do mercado

35

sobre a a¸c˜ao n˜ao se concretizarem e n˜ao der bons resultados, o investidor pode ter maiores

ganhos no longo prazo.

O crit´erio para escolher os 20 ativos desta aplica¸c˜ao por Value Investing s˜ao:

• A a¸c˜ao deve ter mais de R$200, 00 de liquidez di´aria.

• Remover empresas com Margem Ebit negativa do ranking.

• Listar as a¸c˜oes restantes por TEV/Ebit.

• Escolher as 20 a¸c˜oes com TEV/Ebit mais baixo.

• Rebalancear a carteira trimestralmente.

Seguir esses crit´erios faz com que os ativos selecionados sejam os mais bem negociados da

bolsa, elimina as a¸c˜oes que d˜ao preju´ızo, que est˜ao em recupera¸c˜ao judicial ou cujos pap´eis

valem centavos e ordenar os ativos em que a raz˜ao do Valor Total da Firma (Valor de Mercado

+ D´ıvida L´ıquida) e o Lucro Operacional da empresa no per´ıodo de escolha seja o mais baixo.

Foram selecionados 20 ativos presentes na B3 [8] conforme a Tabela 2.8. Os dados hist´oricos

dos ativos selecionados foram adquiridos da base de dados do Yahoo Finan¸cas [26] e as an´alises

foram feitas diariamente no per´ıodo de 5 anos, de 2016 a 2020. Foram observados 1242 dados

e calculados a m´edia, desvio padr˜ao, valor m´ınimo e m´aximo que cada um dos ativos atingiu

durante esse per´ıodo de acordo com a Tabela 2.9

Ativos

MNPR3.SA PFRM3.SA

MRFG3.SA TAEE3.SA

WIZS3.SA

JBSS3.SA

ALUP11.SA CMIG4.SA

TRPL4.SA

POSI3.SA

GOAU3.SA EQTL3.SA

SEER3.SA

UNIP3.SA

CPLE3.SA

CSMG3.SA

SMLS3.SA

VALE3.SA

SBSP3.SA BOVA11.SA

Tabela 2.8: 20 ativos selecionados na B3

36

Ativos

Quantidade M´edia Desvio Padr˜ao Valor M´ınimo

25%

50%

75%

Valor M´aximo

MNPR3.SA 1242.000000

3.823728

1.446092

1.900000

2.650000

3.190000

5.065000

7.100000

MRFG3.SA 1242.000000

7.987338

3.008776

4.904859

6.034657

6.625515

8.714530

17.869112

WIZS3.SA 1242.000000

8.966186

2.371270

5.061675

7.112474

8.787411

10.161046

16.038658

ALUP11.SA 1242.000000

17.962954

4.821787

7.581772

14.745896

16.432737

22.829967

28.595663

TRPL4.SA 1242.000000

13.910080

4.507398

6.482629

10.584508

11.392358

18.666039

26.651421

GOAU3.SA 1242.000000

5.273452

1.919452

0.897171

3.964772

5.502421

6.746684

9.625727

SEER3.SA 1242.000000

17.415366

5.585340

4.659341

13.901977

15.738793

21.922871

31.917297

CPLE3.SA 1242.000000

2.828057

1.743981

0.783060

1.534861

1.776701

4.420864

7.521785

SMLS3.SA 1242.000000

25.387870

9.077126

5.614783

19.769906

24.752284

31.359332

48.328125

SBSP3.SA

1242.000000

34.912891

11.800282

14.400975

25.927906

30.399213

44.913534

63.698132

PFRM3.SA 1242.000000

9.268708

35.427165

3.100000

4.400000

5.760000

7.879985

444.000000

TAEE3.SA 1242.000000

6.704283

1.342060

4.386893

5.342569

6.647615

7.781725

10.482292

JBSS3.SA

1242.000000

14.125218

6.749969

5.626042

8.902293

10.697366

20.816147

31.406322

CMIG4.SA 1242.000000

7.301736

2.550787

2.588987

5.339155

6.062815

9.873926

12.517577

POSI3.SA

1242.000000

3.302004

1.621968

1.185166

2.242689

3.099339

3.619104

11.040193

EQTL3.SA 1242.000000

13.894223

4.888677

5.874737

10.187526

12.101844

17.928874

25.453173

UNIP3.SA 1242.000000

18.825381

12.374976

2.524571

3.900944

25.182061

29.240777

46.962910

CSMG3.SA 1242.000000

11.828609

4.250302

2.288311

9.066231

11.096511

15.674707

19.757368

VALE3.SA 1242.000000

36.321551

15.323389

7.039796

24.257576

40.175711

46.562443

84.015129

BOVA11.SA 1242.000000

77.553543

18.893810

36.450001

62.200001

76.500000

93.749998

115.209999

Tabela 2.9: Dados estat´ısticos dos 20 ativos

O ativo BOVA11.SA serviu como indicador de desempenho de mercado e foi calculado o

retorno anual de cada ativo, multiplicando o retorno m´edio di´ario por 246 (m´edia de dias por

ano que a Bolsa opera), e o retorno m´edio anual da carteira, somando o retorno dos 19 ativos,

exceto o BOVA11.SA e dividindo por 19, conforme a Tabela 2.10.

Ativo

Retorno (%)

Ativo

Retorno (%)

MNPR3.SA

64.785501

PFRM3.SA

1995.254778

MRFG3.SA

27.763572

TAEE3.SA

16.510076

WIZS3.SA

14.637600

JBSS3.SA

29.869827

ALUP11.SA

25.377857

CMIG4.SA

36.924300

TRPL4.SA

28.775796

POSI3.SA

43.828964

GOAU3.SA

52.446228

EQTL3.SA

30.525270

SEER3.SA

31.747340

UNIP3.SA

66.295146

CPLE3.SA

44.530860

CSMG3.SA

39.718146

SMLS3.SA

21.761633

VALE3.SA

52.957418

SBSP3.SA

28.445538

BOVA11.SA

24.249759

Tabela 2.10: Retorno M´edio anual dos 20 ativos

37

Observa-se pela Tabela 2.10 que o ativo PRFM3.SA teve o maior retorno m´edio, por´em

a alta foi repentina e manteve-se por um curto per´ıodo em alta que pode ser ser visto na

Figura 2.10. O segundo maior retorno foi do ativo UNIP3.SA e trˆes ativos que tiveram o pior

desempenho foram WIZS3.SA, TAEE3.SA e SMLS3.SA.

Figura 2.10: Hist´orico do Pre¸co de A¸c˜oes - normalizado

Os c´alculos da variˆancia, do desvio padr˜ao, da covariˆancia e da correla¸c˜ao foram utilizados

para medir os riscos da carteira e na sequˆencia foram gerados portf´olios aleat´orios para deter-

minar a taxa de participa¸c˜ao de cada ativo para obter a carteira otimizada. Assim, a taxa de

participa¸c˜ao da carteira de risco m´ınimo foi organizada na Tabela 2.11.

Ativo

Participa¸c˜ao(%)

Ativo

Participa¸c˜ao (%)

MNPR3.SA

MRFG3.SA

WIZS3.SA

ALUP11.SA

TRPL4.SA

GOAU3.SA

SEER3.SA

CPLE3.SA

SMLS3.SA

SBSP3.SA

7.459657

0.200698

6.128189

7.241891

4.821200

2.174071

1.915521

7.355304

1.635518

0.854359

PFRM3.SA

TAEE3.SA

JBSS3.SA

CMIG4.SA

POSI3.SA

EQTL3.SA

UNIP3.SA

CSMG3.SA

VALE3.SA

BOVA11.SA

6.628306

9.220533

0.038185

4.953554

7.859084

5.923910

6.980297

2.822815

8.876049

6.910861

Tabela 2.11: Taxa de Participa¸c˜ao dos 20 ativos

Comparando essa aplica¸c˜ao com o cen´ario de 6 ativos ´e poss´ıvel concluir que: com a inclus˜ao

de mais ativos que satisfa¸cam os crit´erios do Value Investing ´e poss´ıvel observar que o risco

diminui e o retorno tamb´em diminui, por´em o risco diminui mais que o retorno com a inclus˜ao

38

de ativos e ´e isso que o investidor deve levar em conta para compor a carteira de investimentos.

Considerando o mesmo valor inicial de investimento da se¸c˜ao 3.2, de R$5000, 00, na carteira de

risco m´ınimo com 20 ativos, no ﬁnal de 5 anos o investidor teria um valor de R$22609, 93. H´a

uma diferen¸ca de 14% entre o retorno de 6 ativos e com 20 ativos, por´em o risco diminui com

o acr´escimo de ativos.

2.5 Aplica¸c˜ao no Ensino - Matriz de Covariˆancia

Partindo do pressuposto da BNCC (p.274) de que “todos os cidad˜aos precisam desenvolver

habilidades para coletar, organizar, representar, interpretar e analisar dados em uma variedade

de contextos, de maneira a fazer julgamentos bem fundamentados e tomar as decis˜oes ade-

quadas” o objetivo desta se¸c˜ao ´e mostrar que conceitos estat´ısticos e de ﬁnan¸cas podem ser

trabalhados no Ensino de maneira a despertar a curiosidade aos estudantes. Com este intuito,

ser˜ao apresentados os conceitos necess´arios para compreender a matriz de covariˆancia.

A covariˆancia ou variˆancia conjunta ´e a m´edia do grau de interdependˆencia linear entre

duas vari´aveis. O c´alculo de covariˆancia ´e

σx,y =

1
n

n
(cid:88)

i=1

(xi − x)(yi − y)

onde, xi e yi s˜ao os dados da s´erie x e y no momento i, x e y s˜ao as m´edias de x e y,

respectivamente, n ´e a quantidade de dados observados e σx,y ´e a covariˆancia entre x e y.

Utiliza-se da covariˆancia para compreender a dire¸c˜ao da rela¸c˜ao entre as vari´aveis. Valores

de covariˆancia positivos indicam que valores acima da m´edia de uma vari´avel est˜ao associados a

valores m´edios acima da outra vari´avel e abaixo dos valores m´edios s˜ao igualmente associados.

Valores de covariˆancia negativos indicam que valores acima da m´edia de uma vari´avel est˜ao

associados com valores m´edios abaixo da outra vari´avel.

Compreender o c´alculo da covariˆancia ´e muito importante para quem trabalha com inves-

timentos pois ´e uma maneira de fazer a compara¸c˜ao entre duas vari´aveis. Transferindo este

conceito para o mundo dos investimentos, seria basicamente entender o que acontece com o

pre¸co do ativo x quando o pre¸co do ativo y aumenta ou diminui. Assim uma covariˆancia posi-

tiva entre ativos indica que um ativo acompanha a subida ou a descida do outro, e a covariˆancia

negativa entre ativos indica movimenta¸c˜oes opostas ao outro, ou seja, se um subir o outro cai

ou se um cair o outro sobe. Para compreender a constru¸c˜ao da matriz de covariˆancia, considere

39

apenas dois ativos x e y com 12 dados hist´oricos (observa¸c˜oes), observe que essas informa¸c˜oes

s˜ao organizadas na matriz:

S =








ρ1,1
ρ1,2
...
...
ρ12,1 ρ12,2








(2.1)

onde os elementos da primeira coluna correspondem ao retorno do ativo x e os elementos da

segunda coluna correspondem ao retorno do ativo y no per´ıodo de 12 observa¸c˜oes.

A partir desta matriz ´e que se deﬁne a variˆancia e covariˆancia entre os ativos x e y durante

essas 12 observa¸c˜oes, de modo que a variˆancia dos ativos x e y s˜ao dadas, respectivamente por:

σ2
x = σx,x =

σ2
y = σy,y =

1
12

1
12

12
(cid:88)

(ρtx − ρx)2

t=1

12
(cid:88)

(ρty − ρy)2

t=1

E a covariˆancia entre os ativos x e y durante essas 12 observa¸c˜oes ´e dada por:

σx,y =

1
12

12
(cid:88)

(ρtx − E(Rx))(ρty − E(Ry))

t=1

(2.2)

(2.3)

(2.4)

onde, E(Rx) e E(Ry) representam o retorno m´edio esperado dos ativos x e y, respectivamente.

E por ﬁm, a variˆancia de ativos e a covariˆancia entre os ativos x e y podem ser organizada

em uma estrutura chamada de matriz de covariˆancias, onde os elementos diagonais da matriz

contˆem as variˆancias dos ativos, e os elementos fora da diagonal contˆem as covariˆancias entre

os ativos x e y, representada por:

C =





σx,x σx,y

σy,x σy,y





Para a constru¸c˜ao da matriz de covariˆancia entre 2 ativos, foram selecionados os ativos da

Drogasil, uma rede de drogarias, e da CVC, uma companhia de viagens. Os dados hist´oricos

dos ativos foram coletados da base de dados do Yahoo Finan¸cas [26] as an´alises foram feitas

mensalmente no ano de 2020. As 12 observa¸c˜oes foram organizadas na Tabela 2.12, de modo

que os dados correspondem a matriz S deﬁnida em 2.1.

40

Cota¸c˜ao dos Ativos

Data

Drogasil

CVC

31 de dez. de 2020

30 de nov. de 2020

31 de out. de 2020

01 de out. de 2020

01 de set. de 2020

01 de ago. de 2020

01 de jul. de 2020

01 de jun. de 2020

01 de mai. de 2020

01 de abr. de 2020

01 de mar. de 2020

31 de jan. de 2020

24,89

24,98

25,79

24,01

23,34

21,48

24,73

22,02

21,78

20,84

20,23

23,82

19,04

20,58

18,23

12,28

16,13

18,3

20,8

17,07

13,55

12,98

10,44

24,21

Tabela 2.12: Cota¸c˜ao dos ativos da Drogasil e CVC

Considerando o ativo da Drogasil sendo x e o ativo da CVC sendo y foi calculado o retorno

m´edio, a variˆancia e a covariˆancia dos ativos conforme 2.2, 2.3 e 2.4:

x =

24, 89 + 24, 98 + 25, 79 + 24, 01 + 23, 34 + 21, 48 + 24, 73 + 22, 02 + 21, 78 + 20, 84 + 20, 23 + 23, 82
12

=23, 1592

σx,x =

[(24, 89 − 23, 1592)2 + (24, 98 − 23, 1592)2 + (25, 79 − 23, 1592)2 + (24, 01 − 23, 1592)2+

1
12
+ (23, 34 − 23, 1592)2 + (21, 48 − 23, 1592)2 + (24, 73 − 23, 1592)2 + (22, 02 − 23, 1592)2+

=

+ (21, 78 − 23, 1592)2 + (20, 84 − 23, 1592)2 + (20, 23 − 23, 1592)2 + (23, 82 − 23, 1592)2+]
1
12
+ (0, 1808)2 + (−1, 6792)2 + (1, 5708)2 + (−1, 1392)2+

[(1, 7308)2 + (1, 8208)2 + (2, 6308)2 + (0, 8508)2+

+ (−1, 3792)2 + (−2, 3192)2 + (−2, 9292)2 + (0, 6608)2]
1
12

[2, 9958 + 3, 3154 + 6, 9213 + 0, 7239 + 0, 0327 + 2, 8196 + 2, 4675+

=

36, 8713
12

= 3, 0726

+ 1, 2977 + 1, 9021 + 5, 3785 + 8, 5800 + 0, 4367] =

41

y =

19, 04 + 20, 58 + 18, 23 + 12, 28 + 16, 13 + 18, 3 + 20, 8 + 17, 07 + 13, 55 + 12, 98 + 10, 44 + 24, 21
12

=16, 9675

σy,y =

[(19, 04 − 16, 9675)2 + (20, 58 − 16, 9675)2 + (18, 23 − 16, 9675)2 + (12, 28 − 16, 9675)2+

1
12
(16, 13 − 16, 9675)2 + (18, 3 − 16, 9675)2 + (20, 8 − 16, 9675)2 + (17, 07 − 16, 9675)2+

=

(13, 55 − 16, 9675)2 + (12, 98 − 16, 9675)2 + (10, 44 − 16, 9675)2 + (24, 21 − 16, 9675)2
1
12
+ (−0, 8375)2 + (1, 3325)2 + (3, 8325)2 + (0, 1025)2+

[(2, 0725)2 + (3, 6125)2 + (1, 2625)2 + (−4, 6875)2+

+ (−3, 4175)2 + (−3, 9875)2 + (−6, 5275)2 + (7, 2425)2]
1
12

[4, 2953 + 13, 0502 + 1, 5939 + 21, 9727 + 0, 7014 + 1, 7756+

=

+ 14, 6881 + 0, 0105 + 11, 6793 + 15, 9002 + 42, 6083 + 52, 4538] =

180, 7290
12

= 15, 0608

σx,y =σy,x =

1
12

[(24, 89 − 23, 1592)(19, 04 − 16, 9675) + (24, 98 − 23, 1592)(20, 58 − 16, 9675)+

+ (25, 79 − 23, 1592)(18, 23 − 16, 9675) + (24, 01 − 23, 1592)(12, 28 − 16, 9675)+

+ (23, 34 − 23, 1592)(16, 13 − 16, 9675) + (21, 48 − 23, 1592)(18, 3 − 16, 9675)+

+ (24, 73 − 23, 1592)(20, 8 − 16, 9675) + (22, 02 − 23, 1592)(17, 07 − 16, 9675)+

+ (21, 78 − 23, 1592)(13, 55 − 16, 9675) + (20, 84 − 23, 1592)(12, 98 − 16, 9675)+

+ (20, 23 − 23, 1592)(10, 44 − 16, 9675) + (23, 82 − 23, 1592)(24, 21 − 16, 9675)]

=

1
12

[(1, 7308)(2, 0725) + (1, 8208)(3, 6125) + (2, 6308)(1, 2625)+

+ (0, 8508)(−4, 6875) + (0, 1808)(−0, 8375) + (−1, 6792)(1, 3325)+

+ (1, 5708)(3, 8325) + (−1, 1392)(0, 1025) + (−1, 3792)(−3, 4175)+

+ (−2, 3192)(−3, 9875) + (−2, 9292)(−6, 5275) + (0, 6608)(7, 2425)]

=

1
12

[3, 5872 + 6, 5778 + 3, 3214 − 3, 9883 − 0, 1514 − 2, 2375+

+ 6, 0202 − 0, 1168 + 4, 7133 + 9, 2477 + 19, 1201 + 4, 7861]

=

50, 8799
12

= 4, 24

42

Logo, a matriz de covariˆancia:





σx,x σx,y

σy,x σy,y





 =



3, 0726

4, 24

4, 24

15, 0608





Portanto, ter ativos com covariˆancia positiva na carteira representa um risco maior. O ideal

´e ter ativos com covariˆancia negativa, pois a perda com a desvaloriza¸c˜ao de um ativo pode

ser compensada pela valoriza¸c˜ao de outro. E a importˆancia de organizar essas informa¸c˜oes ´e

justamente conseguir fazer o gerenciamento do risco da carteira de investimentos.

43

Conclus˜ao

Nessa disserta¸c˜ao foram apresentadas de maneira sucinta informa¸c˜oes sobre o ensino de

educa¸c˜ao ﬁnanceira na educa¸c˜ao b´asica, documentos que norteiam a educa¸c˜ao brasileira no

ensino de n´umeros, probabilidade e estat´ıstica, e o ambiente de desenvolvimento Google Colab

que permite o processo de dados das aplica¸c˜oes.

Foi constru´ıdo um referencial te´orico com o intuito de compreender a teoria moderna de

portf´olios. Foram apresentados conceitos sobre retorno, variˆancia, correla¸c˜ao, diversiﬁca¸c˜ao e

fronteira eﬁciente para formalizar o modelo m´edia-variˆancia de Markowitz. Atrav´es do modelo

de preciﬁca¸c˜ao de ativos ﬁnanceiros foi poss´ıvel minimizar o risco identiﬁcando o maior retorno

de um portf´olio para cada n´ıvel de risco assumido com a inclus˜ao de um ativo livre de risco `a

fronteira eﬁciente de Markowitz.

Com as aplica¸c˜oes utilizando o modelo da m´edia-variˆancia, conclui-se que ´e poss´ıvel construir

um portf´olio que possui um retorno maior que o mercado correndo riscos praticamente iguais ao

do mercado. Com a aplica¸c˜ao do modelo de preciﬁca¸c˜ao de ativos veriﬁcou-se o retorno de um

portf´olio compensado pelo risco de se investir no portf´olio. A aplica¸c˜ao com 20 ativos mostra

o princ´ıpio da diversiﬁca¸c˜ao de ativos e a estrat´egia de investimentos Deep Value Investing

que pode ser adotada por investidores na escolha de ativos para compor o portf´olio. E por

ﬁm, a aplica¸c˜ao no Ensino sobre matrizes de covariˆancia mostra a importˆancia de organizar

informa¸c˜oes para fazer o gerenciamento do risco das carteiras de investimentos.

Como trabalhos futuros pretende-se explorar o uso de t´ecnicas de Machine Learning na au-

tomatiza¸c˜ao de processos e nas negocia¸c˜oes que s˜ao usados para modelar o comportamento dos

instrumentos ﬁnanceiros para prever quais opera¸c˜oes no mercado de a¸c˜oes que ser˜ao lucrativas,

fazendo um contraponto do estudo realizado que se utiliza de dados passados para prever e oti-

mizar os retornos. Uma vantagem do uso de algoritmos de Machine Learning ´e que eles operam

em intervalos de tempo onde uma pessoa seria incapaz de operar, reduzindo signiﬁcativamente

a necessidade de o investidor se dedicar ao acompanhamento do mercado.

44

Referˆencias Bibliogr´aﬁcas

[1] Adler,I., Karmarkar N., Resende,M.G.C. and Veiga, G. An implementation of Karmarkar’s

algorithm for linear programming. Mathematical Programming, 44:297-335, 1989.

[2] Ara´ujo, E. A. T.; Oliveira, V. C.; Silva, W. A. C. CAPM em estudos brasileiros: uma

an´alise da pesquisa, Revista de Contabilidade e Organiza¸c˜oes, vol. 6, n. 15. pp. 95-122, 2012.

[3] Arce, P. B. E. Aplica¸c˜ao da Teoria do Portf´olio para Otimiza¸c˜ao de Carteiras de Contratos

de Energia El´etrica e Gest˜ao de Risco, Disserta¸c˜ao de Mestrado, USP, 2014.

[4] Arenales, M., Armentano, V., Morabito, R. e Yanasse, H. Pesquisa operacional. Rio de

Janeiro, Elsevier, 2011.

[5] Assaf Neto, A. Mercado Financeiro, Atlas, 2006.

[6] Base

Nacional

Comum

Curricular,

2021.

Dispon´ıvel

em

http://basenacionalcomum.mec.gov.br/. Accesso em Junho de 2021.

[7] Berti, L.F. Redu¸c˜ao de Itera¸c˜oes dos M´etodos de Pontos Interiores com Itera¸c˜ao continuada,

Tese de Doutorado, Unicamp, 2016.

[8] B3. Brasil, Bolsa, Balc˜ao. Dispon´ıvel em http://www.b3.com.br/. Acesso em Junho de 2021.

[9] Clube do Valor, Luiz Barsi: Conhe¸ca a Hist´oria e os Principais Ensinamentos do

“Rei dos Dividendos”, o Maior Investidor da Bolsa Brasileira, 2020. Dispon´ıvel em

https://clubedovalor.com.br/blog/luiz-barsi/. Acesso em Junho de 2021.

[10] Dicion´ario Financeiro, 2021. Dispon´ıvel em https://www.dicionarioﬁnanceiro.com/. Ac-

cesso em Junho de 2021.

[11] Elton, E.; Gruber, M. J.; Goetzmann, W. N.; Brown S. J. Modern portfolio theory and

investments analysis, Wiley, 2014.

45

[12] Fabozzi, F. J., Kolm, P. N., Pachamanova, D. e Focardi, S. M. Robust Portfolio Optimi-

zation and Management John Wiley & Sons, 2007.

[13] Gloss´ario de Finan¸cas

e

Investimentos. Mais Retorno,

2021. Dispon´ıvel

em

https://maisretorno.com/portal/glossario-ﬁnancas-investimentos. Accesso em Abril de 2021.

[14] Google Colaboratory, 2021. Dispon´ıvel em https://colab.research.google.com/notebooks/intro.

Acesso em Junho de 2021.

[15] Granatyr, J. Python para Finan¸cas: An´alise de Dados e Machine Learning, 2021.

Dispon´ıvel

em https://www.udemy.com/course/python-para-ﬁnancas-analise-de-dados-e-

machine-learning/. Acesso em Junho de 2021.

[16] Karmarkar, N. A new polynomial-time algorithm for linear programming. Combinatorica,

4(4):373-395,1984.

[17] Maculan, N. e Fampa, M. H. C Otimiza¸c˜ao Linear. Bras´ılia, Editora UnB, 2006.

[18] Markowitz, H. M. Portfolio selection, Journal of ﬁnance, 1952, v.7, pp.77-91

[19] Pinto, R. P. L. J. M. An´alise e Implementa¸c˜ao de Modelos de Sele¸c˜ao de Portf´olios com

Heidge de Op¸c˜oes, Tese de Doutorado, UFPB, 2006.

[20] Reilly, F.K., Brown, K. C. Investment Analysis Portfolio Management, South Western

Colege Pub, 2002.

[21] Ross, S. A.; Randolph, W.; Jaﬀe, J. F. Corporate Finance, Irwin/McGraw-Hill, 1999.

[22] Sharpe, William F. A simpliﬁed model for portfolio analysis. Management science, v. 9, n.

2, p. 277-293, 1963.

[23] Sharpe, William F. Mutual Fund Performance. The Journal of Business, vol. 39, no. 1,

1966, pp. 119–138. JSTOR. Dispon´ıvel em https://www.jstor.org/stable/2351741. Accesso

em Junho de 2021.

[24] Silva, Jair da. Uma fam´ılia de algoritmos para programa¸c˜ao linear baseada no algoritmo

de Von Neumann, Tese de Doutorado, Unicamp, 2009.

[25] Vida e Dinheiro, 2021. Dispon´ıvel em https://vidaedinheiro.gov.br/enef/. Accesso em Ju-

nho de 2021.

46

[26] Yahoo Finan¸cas, 2021. Dispon´ıvel em https://br.ﬁnancas.yahoo.com/. Acesso em Junho

de 2021.

[27] Yee, K. Deep Value Investing, Fundamental Risks, and the Margin of Safety, The Journal

of Investing, 2008.

47

Apˆendice A

Aplica¸c˜ao - 6 Ativos

Importa¸c˜ao das bibliotecas

[308]: import pandas as pd

import numpy as np

from pandas_datareader import data

import math

import matplotlib.pyplot as plt

import seaborn as sns

from scipy import stats

import plotly.express as px

Base de dados com 6 ativos

[309]: acoes = ['ITUB3.SA', 'TAEE3.SA', 'UNIP3.SA','KLBN3.SA','ENGI3.SA', 'BOVA11.

(cid:44)→SA']

[310]: acoes_df = pd.DataFrame()

for acao in acoes:

acoes_df[acao] = data.DataReader(acao, data_source='yahoo',
(cid:44)→start='2016-01-04', end='2020-12-30')['Adj Close']

[311]: acoes_df

[312]: acoes_df = acoes_df.rename(columns={'ITUB3.SA':'ITAU','TAEE3.SA':

(cid:44)→'TAESA','UNIP3.SA':'UNIP','KLBN3.SA':'KLABIN','ENGI3.SA':
(cid:44)→'ENERGISA','BOVA11.SA':'BOVA'})

48

[313]: acoes_df.isnull().sum()

[314]: acoes_df.shape

[315]: acoes_df.dropna(inplace=True)

[316]: acoes_df.shape

[317]: acoes_df.isnull().sum()

[318]: acoes_df.to_csv('6acoes.csv')

[319]: acoes_df = pd.read_csv('6acoes.csv')

acoes_df

[320]: acoes_df.columns[1:]

[321]: acoes_df.describe()

Visualiza¸c˜ao

[322]: sns.histplot(acoes_df['ITAU'], bins=20, kde= True);

[323]: sns.histplot(acoes_df['TAESA'], bins=20, kde= True);

[324]: sns.histplot(acoes_df['UNIP'], bins=20, kde= True);

[325]: sns.histplot(acoes_df['KLABIN'], bins=30, kde= True);

[326]: sns.histplot(acoes_df['ENERGISA'], bins=20, kde= True);

[327]: sns.histplot(acoes_df['BOVA'], bins=20, kde= True);

[328]: sns.boxplot(x = acoes_df['ITAU']);

[329]: sns.boxplot(x = acoes_df['TAESA']);

[330]: sns.boxplot(x = acoes_df['UNIP']);

[331]: sns.boxplot(x = acoes_df['KLABIN']);

[332]: sns.boxplot(x = acoes_df['ENERGISA']);

[333]: sns.boxplot(x = acoes_df['BOVA']);

49

[334]: acoes_df.plot(x = 'Date', figsize = (15,7), title = 'Hist´orico do pre¸co das

(cid:44)→a¸c~oes');

[335]: acoes_df

[336]: acoes_df_normalizado = acoes_df.copy()

for i in acoes_df_normalizado.columns[1:]:

acoes_df_normalizado[i] = acoes_df_normalizado[i] /

(cid:44)→acoes_df_normalizado[i][0]

[337]: acoes_df_normalizado

[338]: acoes_df_normalizado.plot(x = 'Date', figsize = (15,7), title = 'Hist´orico

(cid:44)→do pre¸co das a¸c~oes - normalizado');

Taxa de Retorno Simples

[341]: dataset = pd.read_csv('6acoes.csv')

[342]: dataset.shape

[343]: dataset

[344]: len(dataset)

[345]: ((dataset['ITAU'][len(dataset) - 1] - dataset['ITAU'][0]) /

(cid:44)→dataset['ITAU'][0]) * 100

[346]: ((dataset['TAESA'][len(dataset) - 1] - dataset['TAESA'][0]) /

(cid:44)→dataset['TAESA'][0]) * 100

[347]: ((dataset['UNIP'][len(dataset) - 1] - dataset['UNIP'][0]) /

(cid:44)→dataset['UNIP'][0]) * 100

[348]: ((dataset['KLABIN'][len(dataset) - 1] - dataset['KLABIN'][0]) /

(cid:44)→dataset['KLABIN'][0]) * 100

[349]: ((dataset['ENERGISA'][len(dataset) - 1] - dataset['ENERGISA'][0]) /

(cid:44)→dataset['ENERGISA'][0]) * 100

50

[350]: ((dataset['BOVA'][len(dataset) - 1] - dataset['BOVA'][0]) /

(cid:44)→dataset['BOVA'][0]) * 100

[351]: dataset['Retorno Simples ITAU'] = (dataset['ITAU'] / dataset['ITAU'].

(cid:44)→shift(1)) - 1

dataset['Retorno Simples TAESA'] = (dataset['TAESA'] / dataset['TAESA'].

(cid:44)→shift(1)) - 1

dataset['Retorno Simples UNIP'] = (dataset['UNIP'] / dataset['UNIP'].

(cid:44)→shift(1)) - 1

dataset['Retorno Simples KLABIN'] = (dataset['KLABIN'] / dataset['KLABIN'].

(cid:44)→shift(1)) - 1

dataset['Retorno Simples ENERGISA'] = (dataset['ENERGISA'] /
(cid:44)→dataset['ENERGISA'].shift(1)) - 1

dataset['Retorno Simples BOVA'] = (dataset['BOVA'] / dataset['BOVA'].

(cid:44)→shift(1)) - 1

[352]: dataset

[353]: dataset['Retorno Simples ITAU'].plot(figsize = (12,5));

[354]: dataset['Retorno Simples TAESA'].plot(figsize = (12,5));

[355]: dataset['Retorno Simples UNIP'].plot(figsize = (12,5));

[356]: dataset['Retorno Simples KLABIN'].plot(figsize = (12,5));

[357]: dataset['Retorno Simples ENERGISA'].plot(figsize = (12,5));

[358]: dataset['Retorno Simples BOVA'].plot(figsize = (12,5));

[359]: (dataset['Retorno Simples ITAU'].mean() * 246) * 100

[360]: (dataset['Retorno Simples TAESA'].mean() * 246) * 100

[361]: (dataset['Retorno Simples UNIP'].mean() * 246) * 100

[362]: (dataset['Retorno Simples KLABIN'].mean() * 246) * 100

[363]: (dataset['Retorno Simples ENERGISA'].mean() * 246) * 100

[364]: (dataset['Retorno Simples BOVA'].mean() * 246) * 100

51

Retorno de carteira de a¸c˜oes

[365]: dataset = pd.read_csv('6acoes.csv')

dataset

[366]: dataset_normalizado = dataset.copy()

for i in dataset_normalizado.columns[1:]:

dataset_normalizado[i] = (dataset_normalizado[i] /

(cid:44)→dataset_normalizado[i][0])

[367]: dataset_normalizado

[368]: dataset_normalizado.plot(x = 'Date', figsize=(15, 7));

[369]: dataset_normalizado.drop(labels=['Date'], axis=1, inplace=True)

[370]: retorno_carteira = (dataset_normalizado / dataset_normalizado.shift(1)) - 1

retorno_carteira.head()

[371]: retorno_anual = retorno_carteira.mean() * 246

retorno_anual

[372]: retorno_anual = retorno_anual * 100

retorno_anual

[373]: pesos_carteira1 = np.array([0.2, 0.2, 0.2, 0.2, 0.2, 0.0])

[374]: pesos_carteira1.sum()

[375]: np.dot(retorno_anual, pesos_carteira1)

[376]: pesos_carteira2 = np.array([0.1, 0.2, 0.2, 0.4, 0.1, 0.0])

[377]: pesos_carteira2.sum()

[378]: np.dot(retorno_anual, pesos_carteira2)

Gr´aﬁco da carteira x BOVA

[379]: dataset = pd.read_csv('6acoes.csv')

52

[380]: dataset_normalizado = dataset.copy()

for i in dataset_normalizado.columns[1:]:

dataset_normalizado[i] = (dataset_normalizado[i] /

(cid:44)→dataset_normalizado[i][0])

[381]: dataset_normalizado['CARTEIRA'] = (dataset_normalizado['ITAU'] +

(cid:44)→dataset_normalizado['TAESA'] + dataset_normalizado['UNIP'] +
(cid:44)→dataset_normalizado['KLABIN'] + dataset_normalizado['ENERGISA']) / 5

dataset_normalizado

[383]: dataset_normalizado.plot(title= 'Comparativo carteira x BOVA', x = 'Date',

(cid:44)→figsize=(20, 10));

[384]: dataset_normalizado.drop(['ITAU', 'TAESA', 'UNIP', 'KLABIN', 'ENERGISA'],

(cid:44)→axis = 1, inplace= True)

dataset_normalizado

[386]: dataset_normalizado.plot(title= 'Comparativo carteira x BOVA', x = 'Date',

(cid:44)→figsize=(20, 10));

Risco M´edio Anual das A¸c˜oes

[387]: dataset.drop(labels = ['Date'], axis=1, inplace=True)

dataset

Retorno

[388]: taxas_retorno = (dataset / dataset.shift(1)) - 1

taxas_retorno

Desvio Padr˜ao

[390]: taxas_retorno.std() * 100

[394]: taxas_retorno.std() * 246

[395]: math.sqrt(246) # Anualizar

53

[396]: taxas_retorno.std() * math.sqrt(246)

Correla¸c˜ao entre a¸c˜oes

[398]: dataset

[399]: taxas_retorno

[400]: taxas_retorno.cov()

[401]: taxas_retorno.corr()

[402]: plt.figure(figsize=(8,8))

sns.heatmap(taxas_retorno.corr(), annot=True);

Risco de um Portf´olio

[403]: dataset.columns

[404]: pesos1 = np.array([0.2, 0.2, 0.2, 0.2, 0.2, 0.0])

[405]: pesos1.sum()

[406]: taxas_retorno.cov() * 246

[407]: np.dot(taxas_retorno.cov() * 246, pesos1)

[409]: variancia_portfolio1 = np.dot(pesos1, np.dot(taxas_retorno.cov() * 246,

(cid:44)→pesos1))

variancia_portfolio1

[410]: volatilidade_portfolio1 = math.sqrt(variancia_portfolio1)

volatilidade_portfolio1

[411]: pesos2 = np.array([0.0, 0.0, 0.0, 0.0, 0.0, 1.0])

[412]: variancia_portfolio2 = np.dot(pesos2, np.dot(taxas_retorno.cov() * 246,

(cid:44)→pesos2))

variancia_portfolio2

[413]: volatilidade_portfolio2 = math.sqrt(variancia_portfolio2)

volatilidade_portfolio2

54

Aloca¸c˜ao e Otimiza¸c˜ao do Portf´olio

Aloca¸c˜ao aleat´oria de ativos

[425]: dataset = pd.read_csv('6acoes.csv')

dataset

[427]: len(dataset.columns)-1

[428]: dataset.loc[len(dataset) - 1]['BOVA']

[428]: 114.6500015258789

[429]: def alocacao_ativos(dataset, dinheiro_total, seed = 0, melhores_pesos = []):

dataset = dataset.copy()

if seed != 0:

np.random.seed(seed)

if len(melhores_pesos) > 0:

pesos = melhores_pesos

else:

pesos = np.random.random(len(dataset.columns)-1)

#print(pesos, pesos.sum())

pesos = pesos / pesos.sum()

#print(pesos, pesos.sum())

colunas = dataset.columns[1:]

#print(colunas)

for i in colunas:

dataset[i] = (dataset[i] / dataset[i][0])

for i, acao in enumerate(dataset.columns[1:]):

#print(i, acao)

dataset[acao] = dataset[acao] * pesos[i] * dinheiro_total

55

dataset['soma valor'] = dataset.sum(axis = 1)

datas = dataset['Date']

#print(datas)

dataset.drop(labels = ['Date'], axis = 1, inplace = True)
dataset['taxa retorno'] = 0.0

for i in range(1, len(dataset)):

dataset['taxa retorno'][i] = ((dataset['soma valor'][i] / dataset['soma

(cid:44)→valor'][i - 1]) - 1) * 100

acoes_pesos = pd.DataFrame(data = {'A¸c~oes': colunas, 'Pesos': pesos * 100})

return dataset, datas, acoes_pesos, dataset.loc[len(dataset) - 1]['soma
(cid:44)→valor']

[430]: dataset, datas, acoes_pesos, soma_valor = alocacao_ativos(pd.

(cid:44)→read_csv('6acoes.csv'), 5000, 10)

[ ]: dataset

[431]: datas

[432]: acoes_pesos

[433]: soma_valor

Mais c´alculos no portf´olio

Retorno acumulado em todo o per´ıodo

[438]: dataset.loc[len(dataset) - 1]['soma valor'] / dataset.loc[0]['soma valor'] -

(cid:44)→1

56

Desvio padr˜ao

[439]: dataset['taxa retorno'].std()

´Indice Sharpe

[440]: (dataset['taxa retorno'].mean() / dataset['taxa retorno'].std()) * np.

(cid:44)→sqrt(246)

[441]: dinheiro_total = 5000

[442]: soma_valor - dinheiro_total

[443]: taxa_selic_2016 = 14.25

taxa_selic_2017 = 12.25

taxa_selic_2018 = 6.50

taxa_selic_2019 = 5.0

taxa_selic_2020 = 2.0

[444]: valor_2016 = dinheiro_total + (dinheiro_total * taxa_selic_2016 / 100)

valor_2016

[445]: valor_2017 = valor_2016 + (valor_2016 * taxa_selic_2017 / 100)

valor_2017

[446]: valor_2018 = valor_2017 + (valor_2017 * taxa_selic_2018 / 100)

valor_2018

[447]: valor_2019 = valor_2018 + (valor_2018 * taxa_selic_2019 / 100)

valor_2019

[448]: valor_2020 = valor_2019 + (valor_2019 * taxa_selic_2020 / 100)

valor_2020

[449]: rendimentos = valor_2020 - dinheiro_total

rendimentos

[450]: ir = rendimentos * 15 / 100

ir

[451]: valor_2020 - ir

57

[452]: taxa_selic_historico = np.array([12.75, 14.25, 12.25, 6.5, 5.0, 2.0])

taxa_selic_historico.mean() / 100

[452]: 0.08791666666666666

[453]: (dataset['taxa retorno'].mean() - taxa_selic_historico.mean() / 100) /

(cid:44)→dataset['taxa retorno'].std() * np.sqrt(246)

Otimiza¸c˜ao de portf´olio - randˆomico

[454]: import sys

1 - sys.maxsize

[455]: def alocacao_portfolio(dataset, dinheiro_total, sem_risco, repeticoes):

dataset = dataset.copy()

dataset_original = dataset.copy()

lista_retorno_esperado = []

lista_volatilidade_esperada = []

lista_indice_sharpe = []

melhor_indice_sharpe = 1 - sys.maxsize

melhores_pesos = np.empty

melhor_volatilidade = 0

melhor_retorno = 0

for _ in range(repeticoes):

pesos = np.random.random(len(dataset.columns) - 1)

pesos = pesos / pesos.sum()

for i in dataset.columns[1:]:

dataset[i] = dataset[i] / dataset[i][0]

for i, acao in enumerate(dataset.columns[1:]):

58

dataset[acao] = dataset[acao] * pesos[i] * dinheiro_total

dataset.drop(labels = ['Date'], axis = 1, inplace=True)

retorno_carteira = np.log(dataset / dataset.shift(1))

matriz_covariancia = retorno_carteira.cov()

dataset['soma valor'] = dataset.sum(axis = 1)
dataset['taxa retorno'] = 0.0

for i in range(1, len(dataset)):

dataset['taxa retorno'][i] = np.log(dataset['soma valor'][i] /

(cid:44)→dataset['soma valor'][i - 1])

#indice_sharpe = (dataset['taxa retorno'].mean() - sem_risco) /

(cid:44)→dataset['taxa retorno'].std() * np.sqrt(246)

retorno_esperado = np.sum(dataset['taxa retorno'].mean() * pesos) * 246

volatilidade_esperada = np.sqrt(np.dot(pesos, np.dot(matriz_covariancia

(cid:44)→* 246, pesos)))

indice_sharpe = (retorno_esperado - sem_risco) / volatilidade_esperada

if indice_sharpe > melhor_indice_sharpe:

melhor_indicesharpe = indice_sharpe

melhores_pesos = pesos

melhor_volatilidade = volatilidade_esperada

melhor_retorno = retorno_esperado

lista_retorno_esperado.append(retorno_esperado)

lista_volatilidade_esperada.append(volatilidade_esperada)

lista_indice_sharpe.append(indice_sharpe)

59

dataset = dataset_original.copy()

return melhor_indice_sharpe, melhores_pesos, lista_retorno_esperado,

(cid:44)→lista_volatilidade_esperada, lista_indice_sharpe, melhor_volatilidade,

(cid:44)→melhor_retorno

[457]: indice_sharpe, melhores_pesos, ls_retorno, ls_volatilidade,

(cid:44)→ls_indice_sharpe, melhor_volatilidade, melhor_retorno =
(cid:44)→alocacao_portfolio(pd.read_csv('6acoes.csv'), 5000, taxa_selic_historico.

(cid:44)→mean() / 100, 10000)

[458]: indice_sharpe, melhores_pesos

[460]: _, _, acoes_pesos, soma_valor = alocacao_ativos(pd.read_csv('6acoes.csv'),

(cid:44)→5000, melhores_pesos=melhores_pesos)

[ ]: acoes_pesos, soma_valor

[464]: melhor_retorno, melhor_volatilidade

[465]: plt.figure(figsize=(10,8))

plt.scatter(ls_volatilidade, ls_retorno, c = ls_indice_sharpe)
plt.colorbar(label = '´Indice Sharpe')
plt.xlabel('Volatilidade Esperada')
plt.ylabel('Retorno Esperado')
plt.scatter(melhor_volatilidade, melhor_retorno, c = 'red', s = 100);

60

Apˆendice B

CAPM (Capital Asset Pricing Model)

Importa¸c˜ao das bibliotecas e tratamento da base de dados

[1]: import pandas as pd

import numpy as np

import plotly.express as px

[3]: dataset = pd.read_csv('acoes.csv')

dataset

[4]: dataset.drop(labels = ['Date'], axis = 1, inplace = True)

[5]: dataset_normalizado = dataset.copy()

for i in dataset.columns:

dataset_normalizado[i] = dataset[i] / dataset[i][0]

dataset_normalizado

[6]: dataset_taxa_retorno = (dataset_normalizado / dataset_normalizado.shift(1))

(cid:44)→- 1

dataset_taxa_retorno

[7]: dataset_taxa_retorno.fillna(0, inplace=True)

dataset_taxa_retorno.head()

[7]:

ITAU TAESA UNIP KLABIN ENERGISA

BOVA

0 0.000000

1 0.021212

2 -0.005935

0.0

0.0

0.0

0.0

0.0

0.0

0.0

0.0

0.0

0.0 0.000000

0.0 0.001947

0.0 -0.016513

61

3 -0.011941

4 0.015538

0.0

0.0

0.0

0.0

0.0

0.0

0.0 -0.025432

0.0 -0.003294

[8]: dataset_taxa_retorno.mean() * 246

C´alculo do parˆametro BETA para um ativo

BETA com regress˜ao linear

[10]: figura = px.scatter(dataset_taxa_retorno, x = 'BOVA', y = 'ITAU', title =

(cid:44)→'BOVA x ITAU')

figura.show()

[11]: beta, alpha = np.polyfit(x = dataset_taxa_retorno['BOVA'], y =

(cid:44)→dataset_taxa_retorno['ITAU'], deg = 1)

print('beta:', beta, 'alpha:', alpha, 'alpha (%):', alpha * 100)

beta: 0.8266413682322937 alpha: 0.00013371453782834076 alpha (%):

0.013371453782834075

[19]: 0.8266413682322937 * 0.09551391 + .00013371453782834076

[54]: figura = px.scatter(dataset_taxa_retorno, x = 'BOVA', y = 'ITAU', title =

(cid:44)→'BOVA x ITAU')

figura.add_scatter(x = dataset_taxa_retorno['BOVA'], y = beta *
(cid:44)→dataset_taxa_retorno['BOVA'] + alpha)

figura.show()

BETA com covariˆancia e variˆancia

[21]: matriz_covariancia = dataset_taxa_retorno.drop(columns = ['TAESA', 'UNIP',

(cid:44)→'KLABIN', 'ENERGISA']).cov() * 246

matriz_covariancia

[24]: cov_itau_bova = matriz_covariancia.iloc[1, 0]

cov_itau_bova

62

[25]: variancia_bova = dataset_taxa_retorno['BOVA'].var() * 246

variancia_bova

[26]: beta_itau = cov_itau_bova / variancia_bova

beta_itau

C´alculo CAPM para uma a¸c˜ao

[31]: beta

[32]: rm = dataset_taxa_retorno['BOVA'].mean() * 246

rm

[33]: taxa_selic_historico = np.array([14.25, 12.25, 6.5, 5.0, 2.0])

rf = taxa_selic_historico.mean() / 100

rf

[34]: capm_itau = rf + (beta * (rm - rf))

capm_itau

C´alculo do BETA para todas as a¸c˜oes

[35]: betas = []

alphas = []

for ativo in dataset_taxa_retorno.columns[0:-1]:

#print(ativo)
beta, alpha = np.polyfit(dataset_taxa_retorno['BOVA'],

(cid:44)→dataset_taxa_retorno[ativo], 1)

betas.append(beta)

alphas.append(alpha)

[36]: betas

[37]: alphas

[38]: def visualiza_betas_alphas(betas, alphas):

for i, ativo in enumerate(dataset_taxa_retorno.columns[0:-1]):

63

#print(i, ativo)
print(ativo, 'beta:', betas[i], 'alpha:', alphas[i] * 100)

[39]: visualiza_betas_alphas(betas, alphas)

ITAU beta: 0.8266413682322937 alpha: 0.013371453782834075

TAESA beta: 0.2317273193804141 alpha: 0.04423563896377451

UNIP beta: 0.40440211793163516 alpha: 0.22944311377183055

KLABIN beta: 0.4419912134233593 alpha: 0.1397800066456447

ENERGISA beta: 0.3477571694000984 alpha: 0.2166866009462614

[40]: np.array(alphas).mean() * 100

C´alculo CAPM para o portf´olio

[41]: rf

[42]: rm

[43]: capm_empresas = []

for i, ativo in enumerate(dataset_taxa_retorno.columns[0:-1]):

#print(i, ativo)

capm_empresas.append(rf + (betas[i] * (rm - rf)))

[44]: capm_empresas

[45]: def visualiza_capm(capm):

for i, ativo in enumerate(dataset_taxa_retorno.columns[0:-1]):

print(ativo, 'CAPM:', capm[i] * 100)

[46]: visualiza_capm(capm_empresas)

[52]: pesos = np.array([0.2,0.2,0.2,0.2,0.2])

[53]: capm_portfolio = np.sum(capm_empresas * pesos) * 100

capm_portfolio

64

